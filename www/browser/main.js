import{a as x}from"./chunk-SW24Z2WD.js";import"./chunk-4L7JJALS.js";import{a as w}from"./chunk-ZYD3447Z.js";import"./chunk-XKXSPCRI.js";import{a as N}from"./chunk-G4UC2DN7.js";import{a as i}from"./chunk-JOCFUSNQ.js";import{A as u,D as C,E as P,F as L,Gb as H,Ia as T,Na as E,Qb as g,Ua as k,c as v,g as M,l as d,m,n as p,na as A,oa as b,pa as I,ra as j,ta as y,ua as c,wa as R,xa as f,y as l,z as S}from"./chunk-LYKZFS62.js";import"./chunk-B3I3XDBM.js";import"./chunk-QUJFQN2Y.js";import"./chunk-KSM42KW3.js";import"./chunk-KAYW723Y.js";import"./chunk-ZJWVYB4W.js";import"./chunk-WVHTM5RI.js";import"./chunk-IN6HLDFE.js";import"./chunk-GIMG75PD.js";import"./chunk-O5IUGFKF.js";import"./chunk-LHDZOLCP.js";import"./chunk-AEZ3F2AP.js";import"./chunk-7FY2OE2O.js";import"./chunk-5KM5ZX5B.js";import"./chunk-EAHJVID6.js";import"./chunk-FOH2II3V.js";import"./chunk-VZWY4NEG.js";import"./chunk-WI5MSH4N.js";import"./chunk-5SJVYNIP.js";import"./chunk-CKP3SGE2.js";import"./chunk-QLR5SVGL.js";import"./chunk-JHI3MBHO.js";var _=(()=>{class e{constructor(r,t,s,a){this.storageService=r,this.router=t,this.otpService=s,this.locationService=a,this.initApp()}initApp(){if(!this.storageService.getToken()){this.router.navigate(["/"]);return}this.otpService.validateToken().subscribe({next:t=>{if(t.status&&t.data){if(t.data.user&&this.storageService.saveUser(t.data.user),!t.data.hasDefaultAddress){this.router.navigate(["/shared/location-setup"]);return}let a=t.data.user.addresses?.find(n=>n.defaultAddress);a?.coords?this.locationService.checkServiceArea(a.coords).subscribe({next:n=>{n.status&&n.data?.serviceAvailable?this.router.navigate(["/tabs"]):this.router.navigate(["/service-not-available"])},error:()=>{this.router.navigate(["/tabs"])}}):this.router.navigate(["/tabs"])}else this.storageService.clean(),this.router.navigate(["/"])},error:()=>{this.storageService.clean(),this.router.navigate(["/"])}})}static{this.\u0275fac=function(t){return new(t||e)(l(i),l(c),l(w),l(x))}}static{this.\u0275cmp=S({type:e,selectors:[["app-root"]],standalone:!1,decls:2,vars:0,template:function(t,s){t&1&&(C(0,"ion-app"),L(1,"ion-router-outlet"),P())},dependencies:[k,H],encapsulation:2})}}return e})();var o=(()=>{class e{constructor(r,t){this.storageService=r,this.router=t}canActivate(){return this.storageService.isLoggedIn()?!0:this.router.createUrlTree(["/"])}canLoad(r,t){return this.storageService.isLoggedIn()?!0:(this.router.navigate(["/"]),!1)}static{this.\u0275fac=function(t){return new(t||e)(p(i),p(c))}}static{this.\u0275prov=d({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var G=[{path:"",loadChildren:()=>import("./chunk-LBC522V7.js").then(e=>e.LoginPageModule)},{path:"otp-verification",loadChildren:()=>import("./chunk-IQA52B74.js").then(e=>e.OtpVerificationPageModule)},{path:"service-not-available",loadChildren:()=>import("./chunk-UKHFOFTD.js").then(e=>e.ServiceNotAvailablePageModule)},{path:"home",loadChildren:()=>import("./chunk-PAZWQNPI.js").then(e=>e.HomePageModule),canLoad:[o]},{path:"location-setup",loadChildren:()=>import("./chunk-RGOESEIW.js").then(e=>e.LocationSetupPageModule),canLoad:[o]},{path:"home-main",loadChildren:()=>import("./chunk-XCCBEG7B.js").then(e=>e.HomeMainPageModule),canLoad:[o]},{path:"cart",loadChildren:()=>import("./chunk-QCPPKDRA.js").then(e=>e.CartPageModule),canLoad:[o]},{path:"payment",loadChildren:()=>import("./chunk-IT6D7MA2.js").then(e=>e.PaymentPageModule),canLoad:[o]},{path:"shared/location-setup",loadChildren:()=>import("./chunk-KFAJ7ZR5.js").then(e=>e.LocationSetupPageModule),canLoad:[o]},{path:"home-land",loadChildren:()=>import("./chunk-JYCNHNV6.js").then(e=>e.HomeLandPageModule),canLoad:[o]},{path:"items",loadChildren:()=>import("./chunk-Q2HE3UI5.js").then(e=>e.ItemsPageModule),canLoad:[o]},{path:"tabs",loadChildren:()=>import("./chunk-C7EG6YKO.js").then(e=>e.TabsPageModule),canLoad:[o]},{path:"orders",loadChildren:()=>import("./chunk-BGJ5CKWQ.js").then(e=>e.OrdersPageModule),canLoad:[o]},{path:"all-items",loadChildren:()=>import("./chunk-IOM5SVCW.js").then(e=>e.AllItemsPageModule),canLoad:[o]},{path:"essentials-home",loadChildren:()=>import("./chunk-5OWYGEQS.js").then(e=>e.EssentialsHomePageModule),canLoad:[o]},{path:"groceries-home",loadChildren:()=>import("./chunk-KIWNVHI4.js").then(e=>e.GroceriesHomePageModule),canLoad:[o]},{path:"popular-items",loadChildren:()=>import("./chunk-PJATI54F.js").then(e=>e.PopularItemsPageModule),canLoad:[o]},{path:"popular-vendors",loadChildren:()=>import("./chunk-644T2MWC.js").then(e=>e.PopularVendorsPageModule),canLoad:[o]},{path:"search",loadChildren:()=>import("./chunk-PV2QEIBJ.js").then(e=>e.SearchPageModule),canLoad:[o]}],B=(()=>{class e{static{this.\u0275fac=function(t){return new(t||e)}}static{this.\u0275mod=u({type:e})}static{this.\u0275inj=m({imports:[f.forRoot(G,{preloadingStrategy:R}),f]})}}return e})();var D=(()=>{class e{constructor(r,t){this.storageService=r,this.router=t}intercept(r,t){let s=this.storageService.getToken(),a=r;return s&&(a=r.clone({setHeaders:{Authorization:`Bearer ${s}`}})),t.handle(a).pipe(M(n=>(n.status===401&&(this.storageService.clean(),this.router.navigate(["/"])),v(()=>n))))}static{this.\u0275fac=function(t){return new(t||e)(p(i),p(c))}}static{this.\u0275prov=d({token:e,factory:e.\u0275fac})}}return e})();var U=(()=>{class e{static{this.\u0275fac=function(t){return new(t||e)}}static{this.\u0275mod=u({type:e,bootstrap:[_]})}static{this.\u0275inj=m({providers:[{provide:y,useClass:E},{provide:I,useClass:D,multi:!0},i],imports:[b,g.forRoot(),B,g,T,j]})}}return e})();N.production&&void 0;A().bootstrapModule(U).catch(e=>console.log(e));
