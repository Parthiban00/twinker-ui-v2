import{a as X}from"./chunk-IK4LNLMA.js";import{a as x}from"./chunk-2IU2DTSR.js";import{a as v}from"./chunk-4BLUDMXE.js";import{A as d,Ea as q,F as f,I as u,Ka as H,M as b,N as M,O,Ra as U,Xa as G,Ya as J,ba as N,d as T,e as P,f as C,fa as R,g as a,ga as E,h as c,ia as y,ja as F,la as S,m as _,o as g,oa as L,p as I,q as w,qa as B,sb as K,u as p,ua as z,v as l,w as j,wa as D,xa as A,z as W,zb as Q}from"./chunk-7S3NPSVE.js";import"./chunk-B3I3XDBM.js";import"./chunk-QUJFQN2Y.js";import"./chunk-KSM42KW3.js";import"./chunk-KAYW723Y.js";import"./chunk-ZJWVYB4W.js";import"./chunk-WVHTM5RI.js";import"./chunk-IN6HLDFE.js";import"./chunk-GIMG75PD.js";import"./chunk-O5IUGFKF.js";import"./chunk-LHDZOLCP.js";import"./chunk-AEZ3F2AP.js";import"./chunk-7FY2OE2O.js";import"./chunk-5KM5ZX5B.js";import"./chunk-EAHJVID6.js";import"./chunk-FOH2II3V.js";import"./chunk-VZWY4NEG.js";import"./chunk-WI5MSH4N.js";import"./chunk-5SJVYNIP.js";import"./chunk-CKP3SGE2.js";import"./chunk-QLR5SVGL.js";import"./chunk-JHI3MBHO.js";var V=(()=>{class n{constructor(o,t,e){this.webservice=o,this.router=t,this.storageServie=e}login(o){return this.webservice.post("auth/login",o)}resendOTP(o){return this.webservice.post("auth/requestOTP",o)}static{this.\u0275fac=function(t){return new(t||n)(C(x),C(y),C(v))}}static{this.\u0275prov=T({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var Y=(()=>{class n{constructor(o,t,e,r,s){this.activatedRoute=o,this.otpService=t,this.commonService=e,this.router=r,this.storgeService=s,this.otp={first:"",second:"",third:"",forth:""},this.activatedRoute.queryParams.subscribe(i=>{this.mobileNo=i.mobileNo})}ngOnInit(){}otpController(o,t,e,r){if(o.target.value.length<1&&e)e.setFocus();else if(t&&o.target.value.length>0)t.setFocus();else return 0}verifyOtpAndLogin(){let o=`${this.otp.first}${this.otp.second}${this.otp.third}${this.otp.fourth}`;if(this.mobileNo&&o&&o.length===4){let t={mobileNo:this.mobileNo,otp:o};this.otpService.login(t).subscribe({next:e=>{e.status?(this.commonService.presentToast("bottom",e.message,"success"),e.data&&this.storgeService.saveUser(e.data),e.data&&e.data.addresses&&e.data.addresses.length?this.router.navigate(["/tabs/"]):this.router.navigate(["/shared/location-setup"])):this.commonService.presentToast("bottom",e.message,"danger")},error:e=>{this.commonService.presentToast("bottom",e.error.message?e.error.message:"Error while login!","danger")},complete:()=>{}})}}resentOtp(){if(this.mobileNo){let o={mobileNo:this.mobileNo};this.otpService.resendOTP(o).subscribe({next:t=>{t.status?this.commonService.presentToast("bottom",t.message,"success"):this.commonService.presentToast("bottom",t.message,"danger")},error:t=>{this.commonService.presentToast("bottom",t.error.message?t.error.message:"Error while resend OTP!","danger")},complete:()=>{}})}}static{this.\u0275fac=function(t){return new(t||n)(g(E),g(V),g(X),g(y),g(v))}}static{this.\u0275cmp=I({type:n,selectors:[["app-otp-verification"]],standalone:!1,decls:24,vars:4,consts:[["otp1",""],["otp2",""],["otp3",""],["otp4",""],[1,"otp-content"],[1,"otp-wrapper"],["fill","clear","routerLink","/login","routerDirection","back",1,"back-btn"],["slot","icon-only","name","arrow-back-outline","color","medium"],[1,"page-title"],[1,"page-subtitle"],[1,"otp-boxes"],["maxlength","1","inputmode","numeric",1,"otp-box",3,"ngModelChange","keyup","ngModel"],[1,"resend-section"],[1,"resend-text"],[1,"resend-link",3,"click"],["expand","block",1,"confirm-btn",3,"click"]],template:function(t,e){if(t&1){let r=W();p(0,"ion-content",4)(1,"div",5)(2,"ion-button",6),j(3,"ion-icon",7),l(),p(4,"h1",8),u(5,"Verification Code"),l(),p(6,"p",9),u(7,"We have sent the verification code to your mobile number"),l(),p(8,"div",10)(9,"ion-input",11,0),O("ngModelChange",function(i){return a(r),M(e.otp.first,i)||(e.otp.first=i),c(i)}),d("keyup",function(i){a(r);let m=f(10),h=f(12);return c(e.otpController(i,h,m,""))}),l(),p(11,"ion-input",11,1),O("ngModelChange",function(i){return a(r),M(e.otp.second,i)||(e.otp.second=i),c(i)}),d("keyup",function(i){a(r);let m=f(10),h=f(14);return c(e.otpController(i,h,m,m))}),l(),p(13,"ion-input",11,2),O("ngModelChange",function(i){return a(r),M(e.otp.third,i)||(e.otp.third=i),c(i)}),d("keyup",function(i){a(r);let m=f(12),h=f(16);return c(e.otpController(i,h,m,m))}),l(),p(15,"ion-input",11,3),O("ngModelChange",function(i){return a(r),M(e.otp.fourth,i)||(e.otp.fourth=i),c(i)}),d("keyup",function(i){a(r);let m=f(14);return c(e.otpController(i,"",m,m))}),l()(),p(17,"div",12)(18,"span",13),u(19,"Didn't receive code? "),l(),p(20,"span",14),d("click",function(){return a(r),c(e.resentOtp())}),u(21,"Resend"),l()(),p(22,"ion-button",15),d("click",function(){return a(r),c(e.verifyOtpAndLogin())}),u(23,"Confirm"),l()()()}t&2&&(_(9),b("ngModel",e.otp.first),_(2),b("ngModel",e.otp.second),_(2),b("ngModel",e.otp.third),_(2),b("ngModel",e.otp.fourth))},dependencies:[L,z,B,H,U,G,J,q,K,F],styles:[".otp-content[_ngcontent-%COMP%]{--ion-background-color: #ffffff}.otp-content[_ngcontent-%COMP%]   .otp-wrapper[_ngcontent-%COMP%]{padding:20px 28px 28px;max-width:420px;margin:0 auto}.otp-content[_ngcontent-%COMP%]   .back-btn[_ngcontent-%COMP%]{--padding-start: 0;--padding-end: 0;margin:0 0 24px -8px;height:36px}.otp-content[_ngcontent-%COMP%]   .back-btn[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:22px}.otp-content[_ngcontent-%COMP%]   .page-title[_ngcontent-%COMP%]{font-family:latoBold,sans-serif;font-size:24px;font-weight:700;color:#1a1a1a;margin:0 0 8px}.otp-content[_ngcontent-%COMP%]   .page-subtitle[_ngcontent-%COMP%]{font-family:latoRegular,sans-serif;font-size:14px;color:#888;margin:0 0 36px;line-height:1.4}.otp-content[_ngcontent-%COMP%]   .otp-boxes[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:16px;margin-bottom:28px}.otp-content[_ngcontent-%COMP%]   .otp-boxes[_ngcontent-%COMP%]   .otp-box[_ngcontent-%COMP%]{width:55px;height:55px;min-width:55px;max-width:55px;border:1.5px solid #d0d0d0;border-radius:12px;text-align:center;font-size:22px;font-family:latoBold,sans-serif;color:#1a1a1a;--padding-start: 0;--padding-end: 0;--padding-top: 0;--padding-bottom: 0;--background: #ffffff;transition:border-color .2s ease}.otp-content[_ngcontent-%COMP%]   .otp-boxes[_ngcontent-%COMP%]   .otp-box.has-focus[_ngcontent-%COMP%]{border-color:#f5853f}.otp-content[_ngcontent-%COMP%]   .resend-section[_ngcontent-%COMP%]{text-align:center;margin-bottom:32px;font-family:latoRegular,sans-serif;font-size:14px}.otp-content[_ngcontent-%COMP%]   .resend-section[_ngcontent-%COMP%]   .resend-text[_ngcontent-%COMP%]{color:#888}.otp-content[_ngcontent-%COMP%]   .resend-section[_ngcontent-%COMP%]   .resend-link[_ngcontent-%COMP%]{color:#f5853f;font-family:latoBold,sans-serif;font-weight:600;cursor:pointer}.otp-content[_ngcontent-%COMP%]   .confirm-btn[_ngcontent-%COMP%]{--background: #F5853F;--border-radius: 30px;--box-shadow: none;height:50px;font-size:16px;font-family:latoBold,sans-serif;font-weight:600;letter-spacing:.5px;text-transform:none;--color: #ffffff}"]})}}return n})();var ie=[{path:"",component:Y}],Z=(()=>{class n{static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275mod=w({type:n})}static{this.\u0275inj=P({imports:[S.forChild(ie),S]})}}return n})();var Oe=(()=>{class n{static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275mod=w({type:n})}static{this.\u0275inj=P({providers:[x,V],imports:[N,D,Q,R,Z,A]})}}return n})();export{Oe as OtpVerificationPageModule};
