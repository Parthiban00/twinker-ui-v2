import{a as Ie,b as ke}from"./chunk-ZHWSZFXN.js";import{b as Be}from"./chunk-M5S6JTDJ.js";import{a as Se}from"./chunk-QOTHE3OL.js";import{a as ye}from"./chunk-2UEUXISU.js";import{a as we}from"./chunk-XP5VWEMW.js";import{a as j}from"./chunk-EE54FCRT.js";import{a as Me}from"./chunk-5L56GRTK.js";import{a as be}from"./chunk-RUV2QHWV.js";import{a as Pe}from"./chunk-G4UC2DN7.js";import{a as Oe}from"./chunk-4TOLQR2K.js";import{B as d,C as n,D as i,Da as se,E as p,F as B,G as E,Ha as W,Hb as ve,I as O,Ia as ce,J as _,Jb as Ce,K as c,Ka as de,Lb as he,Ma as le,P as Z,Q as K,S as r,Sa as fe,T as v,U as g,Ua as pe,Ub as A,V as T,W as ee,X as te,Xb as R,Y as ne,b as U,ba as ie,da as oe,db as ge,e as J,eb as me,g as G,ha as z,ka as re,kb as _e,l as Q,la as D,m as I,n as X,nb as ue,o as u,p as x,pb as xe,qb as V,sa as ae,t as q,u as o,va as F,w as h,x as k,y as S,z as m}from"./chunk-GJ24JKLH.js";import"./chunk-B3I3XDBM.js";import"./chunk-QUJFQN2Y.js";import"./chunk-KSM42KW3.js";import"./chunk-KAYW723Y.js";import"./chunk-ZJWVYB4W.js";import"./chunk-WVHTM5RI.js";import"./chunk-IN6HLDFE.js";import"./chunk-GIMG75PD.js";import"./chunk-O5IUGFKF.js";import"./chunk-LHDZOLCP.js";import"./chunk-AEZ3F2AP.js";import"./chunk-7FY2OE2O.js";import"./chunk-5KM5ZX5B.js";import"./chunk-EAHJVID6.js";import"./chunk-FOH2II3V.js";import"./chunk-VZWY4NEG.js";import"./chunk-WI5MSH4N.js";import"./chunk-5SJVYNIP.js";import"./chunk-CKP3SGE2.js";import"./chunk-QLR5SVGL.js";import{a as Y,b as H,e as $}from"./chunk-JHI3MBHO.js";function je(t,l){if(t&1&&(n(0,"p",17),r(1),i()),t&2){let e=c();o(),v(e.orderCode)}}var Ee=(()=>{class t{constructor(e,a,s){this.modalCtrl=e,this.cdr=a,this.eventBus=s,this.orderCode="",this.state="success"}ngOnInit(){localStorage.removeItem("cart-items"),this.eventBus.emit("cart:updated",0),this.cdr.detectChanges()}trackOrder(){this.modalCtrl.dismiss({action:"track"},"confirm")}goHome(){this.modalCtrl.dismiss({action:"home"},"confirm")}static{this.\u0275fac=function(a){return new(a||t)(h(A),h(z),h(j))}}static{this.\u0275cmp=k({type:t,selectors:[["app-order-status"]],inputs:{orderCode:"orderCode"},decls:23,vars:1,consts:[[1,"order-status-page"],[1,"status-content","success-content"],[1,"icon-area"],[1,"circle-bg","success-circle"],["name","checkmark",1,"status-icon","check-icon"],[1,"confetti-dot","dot-1"],[1,"confetti-dot","dot-2"],[1,"confetti-dot","dot-3"],[1,"confetti-dot","dot-4"],[1,"confetti-dot","dot-5"],[1,"confetti-dot","dot-6"],[1,"status-title","success-title"],["class","order-code",4,"ngIf"],[1,"status-subtitle"],[1,"action-buttons"],[1,"primary-btn",3,"click"],[1,"secondary-btn",3,"click"],[1,"order-code"]],template:function(a,s){a&1&&(n(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),p(4,"ion-icon",4),i(),p(5,"div",5)(6,"div",6)(7,"div",7)(8,"div",8)(9,"div",9)(10,"div",10),i(),n(11,"h1",11),r(12,"Order placed!"),i(),m(13,je,2,1,"p",12),n(14,"p",13),r(15,"Your order is confirmed."),p(16,"br"),r(17,"Sit back and relax!"),i(),n(18,"div",14)(19,"button",15),_("click",function(){return s.trackOrder()}),r(20,"Track my order"),i(),n(21,"button",16),_("click",function(){return s.goHome()}),r(22,"Back to home"),i()()()()),a&2&&(o(13),d("ngIf",s.orderCode))},dependencies:[F,D,R,V],styles:[".order-status-page[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;min-height:100vh;background:#fff;padding:40px 32px}.status-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;text-align:center;width:100%;max-width:320px;animation:_ngcontent-%COMP%_fadeIn .5s ease}.icon-area[_ngcontent-%COMP%]{position:relative;width:140px;height:140px;margin-bottom:36px;display:flex;align-items:center;justify-content:center}.circle-bg[_ngcontent-%COMP%]{width:120px;height:120px;border-radius:50%;display:flex;align-items:center;justify-content:center;position:relative;z-index:2}.placing-circle[_ngcontent-%COMP%]{background:linear-gradient(145deg,#f85c70,#fc5c7d);box-shadow:0 12px 40px #f85c7059}.success-circle[_ngcontent-%COMP%]{background:linear-gradient(145deg,#f85c70,#fc5c7d);box-shadow:0 12px 40px #f85c7059;animation:_ngcontent-%COMP%_scaleIn .5s cubic-bezier(.34,1.56,.64,1)}.status-icon[_ngcontent-%COMP%]{font-size:48px;color:#fff;z-index:3}.check-icon[_ngcontent-%COMP%]{font-size:56px;font-weight:700;animation:_ngcontent-%COMP%_checkPop .6s cubic-bezier(.34,1.56,.64,1) .2s both}.spinner-arc[_ngcontent-%COMP%]{position:absolute;top:-4px;left:-4px;width:128px;height:128px;z-index:4;animation:_ngcontent-%COMP%_spinArc 1.4s linear infinite}.arc[_ngcontent-%COMP%]{transform-origin:center}.pulse-ring[_ngcontent-%COMP%]{position:absolute;border-radius:50%;border:2px solid rgba(248,92,112,.2);z-index:1}.ring-1[_ngcontent-%COMP%]{width:140px;height:140px;top:0;left:0;animation:_ngcontent-%COMP%_pulseRing 2s ease-out infinite}.ring-2[_ngcontent-%COMP%]{width:140px;height:140px;top:0;left:0;animation:_ngcontent-%COMP%_pulseRing 2s ease-out .8s infinite}.confetti-dot[_ngcontent-%COMP%]{position:absolute;border-radius:50%;z-index:1;animation:_ngcontent-%COMP%_confettiBurst .8s cubic-bezier(.34,1.56,.64,1) forwards;opacity:0}.dot-1[_ngcontent-%COMP%]{width:10px;height:10px;background:gold;top:0;left:20%;animation-delay:.1s}.dot-2[_ngcontent-%COMP%]{width:8px;height:8px;background:#f85c70;top:10%;right:5%;animation-delay:.2s}.dot-3[_ngcontent-%COMP%]{width:12px;height:12px;background:#4a5bf5;bottom:15%;left:0;animation-delay:.15s}.dot-4[_ngcontent-%COMP%]{width:7px;height:7px;background:#2dbcb6;bottom:5%;right:15%;animation-delay:.25s}.dot-5[_ngcontent-%COMP%]{width:9px;height:9px;background:#ff8c42;top:30%;left:-5%;animation-delay:.3s}.dot-6[_ngcontent-%COMP%]{width:6px;height:6px;background:gold;top:20%;right:-2%;animation-delay:.18s}.status-title[_ngcontent-%COMP%]{font-family:latoBold,sans-serif;font-size:26px;color:#1a1a1a;margin:0 0 10px}.success-title[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeSlideUp .5s ease .3s both}.order-code[_ngcontent-%COMP%]{font-family:latoBold,sans-serif;font-size:13px;color:#f85c70;background:#f85c7014;border-radius:20px;padding:4px 14px;margin:-4px 0 12px;letter-spacing:.5px;animation:_ngcontent-%COMP%_fadeSlideUp .5s ease .35s both}.status-subtitle[_ngcontent-%COMP%]{font-family:latoRegular,sans-serif;font-size:15px;color:#888;line-height:1.5;margin:0 0 36px}.progress-wrap[_ngcontent-%COMP%]{width:100%;margin-bottom:32px}.progress-track[_ngcontent-%COMP%]{width:100%;height:6px;background:#f0f0f0;border-radius:3px;overflow:hidden;margin-bottom:10px}.progress-fill[_ngcontent-%COMP%]{height:100%;background:linear-gradient(90deg,#f85c70,#fc5c7d);border-radius:3px;transition:width 1s linear}.progress-time[_ngcontent-%COMP%]{font-family:latoRegular,sans-serif;font-size:13px;color:#888}.cancel-btn[_ngcontent-%COMP%]{background:none;border:1.5px solid #e0e0e0;border-radius:30px;padding:13px 40px;font-family:latoBold,sans-serif;font-size:15px;color:#888;cursor:pointer;transition:border-color .2s,color .2s}.cancel-btn[_ngcontent-%COMP%]:active{border-color:#f85c70;color:#f85c70}.action-buttons[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px;width:100%;animation:_ngcontent-%COMP%_fadeSlideUp .5s ease .5s both}.primary-btn[_ngcontent-%COMP%]{width:100%;background:linear-gradient(135deg,#f85c70,#fc5c7d);color:#fff;font-family:latoBold,sans-serif;font-size:16px;border:none;border-radius:30px;padding:15px;cursor:pointer;transition:transform .1s}.primary-btn[_ngcontent-%COMP%]:active{transform:scale(.98)}.secondary-btn[_ngcontent-%COMP%]{width:100%;background:#fff;color:#1a1a1a;font-family:latoBold,sans-serif;font-size:15px;border:1.5px solid #e0e0e0;border-radius:30px;padding:14px;cursor:pointer;transition:border-color .2s}.secondary-btn[_ngcontent-%COMP%]:active{border-color:#f85c70}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}@keyframes _ngcontent-%COMP%_spinArc{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@keyframes _ngcontent-%COMP%_pulseRing{0%{transform:scale(1);opacity:.6}to{transform:scale(1.6);opacity:0}}@keyframes _ngcontent-%COMP%_scaleIn{0%{transform:scale(0);opacity:0}to{transform:scale(1);opacity:1}}@keyframes _ngcontent-%COMP%_checkPop{0%{transform:scale(0) rotate(-45deg);opacity:0}to{transform:scale(1) rotate(0);opacity:1}}@keyframes _ngcontent-%COMP%_confettiBurst{0%{transform:scale(0) translate(0);opacity:0}50%{opacity:1}to{transform:scale(1) translate(var(--tx, 0),var(--ty, 0));opacity:.8}}@keyframes _ngcontent-%COMP%_fadeSlideUp{0%{opacity:0;transform:translateY(16px)}to{opacity:1;transform:translateY(0)}}"]})}}return t})();var Te=(()=>{class t{constructor(e){this.webservice=e}calculateFees(e){return this.webservice.post("locality/calculateFees",e)}static{this.\u0275fac=function(a){return new(a||t)(X(be))}}static{this.\u0275prov=Q({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function Ne(t,l){if(t&1){let e=O();n(0,"div",11),p(1,"ion-icon",12),n(2,"h2",13),r(3,"Your cart is empty"),i(),n(4,"p",14),r(5,"Add items from a restaurant to start your order"),i(),n(6,"button",15),_("click",function(){u(e);let s=c();return x(s.browsRestaurants())}),r(7,"Browse Restaurants"),i()()}}function $e(t,l){if(t&1&&(n(0,"p",52)(1,"strong"),r(2),i()()),t&2){let e=c(2);o(2),g("",e.feeBreakdown.delivery.maxDistanceKm," km distance")}}function Ue(t,l){t&1&&(n(0,"p",52)(1,"strong"),r(2,"Calculating..."),i()())}function Ge(t,l){t&1&&(n(0,"span"),r(1," \xB7 Free delivery!"),i())}function qe(t,l){if(t&1&&(n(0,"p",53),r(1),m(2,Ge,2,0,"span",39),i()),t&2){let e=c(2);o(),g(" Est. delivery fee \u20B9",e.feeBreakdown.delivery.originalFee.toFixed(0)," "),o(),d("ngIf",e.feeBreakdown.delivery.freeDeliveryApplied)}}function Ke(t,l){if(t&1&&(n(0,"div",54)(1,"p"),r(2),i()()),t&2){let e=c(2);o(2),v(e.userAddress.fullAddress||e.userAddress.addressLine1||"Delivery address")}}function We(t,l){if(t&1&&(n(0,"p",74),r(1),i()),t&2){let e=c().$implicit;o(),v(e.vendorCuisine)}}function Ye(t,l){t&1&&p(0,"img",97)}function He(t,l){t&1&&p(0,"img",98)}function Je(t,l){t&1&&p(0,"img",99)}function Qe(t,l){if(t&1&&(n(0,"p",100),r(1),i()),t&2){let e=c().$implicit;o(),v(e.customizationSummary)}}function Xe(t,l){if(t&1&&(n(0,"span",101),r(1),i()),t&2){let e=c().$implicit;o(),g(" \u20B9 ",(e.basePrice*e.itemCount).toFixed(2)," ")}}function Ze(t,l){if(t&1){let e=O();n(0,"div",75)(1,"div",76)(2,"div",77),m(3,Ye,1,0,"img",78)(4,He,1,0,"img",79)(5,Je,1,0,"img",80),i(),n(6,"h4",81),r(7),i(),m(8,Qe,2,1,"p",82),n(9,"div",83)(10,"span",84),r(11),i(),m(12,Xe,2,1,"span",85),i(),n(13,"div",86)(14,"div",87)(15,"button",88),_("click",function(){let s=u(e).$implicit,f=c(3);return x(f.decrementItem(s))}),p(16,"ion-icon",89),i(),n(17,"span",90),r(18),i(),n(19,"button",88),_("click",function(){let s=u(e).$implicit,f=c(3);return x(f.incrementItem(s))}),p(20,"ion-icon",91),i()(),n(21,"button",92),r(22,"Note"),i(),n(23,"button",93),p(24,"ion-icon",94),i()()(),n(25,"div",95),p(26,"img",96),i()()}if(t&2){let e=l.$implicit,a=c(3);o(3),d("ngIf",e.type==="non-veg"),o(),d("ngIf",e.type==="veg"),o(),d("ngIf",e.type==="egg"),o(2),v(e.productName),o(),d("ngIf",e.customizationSummary),o(3),g("\u20B9 ",(e.price*e.itemCount).toFixed(2)),o(),d("ngIf",e.basePrice&&e.basePrice!==e.price),o(6),v(e.itemCount),o(8),d("src",a.getItemImage(e),q)("alt",e.productName)}}function et(t,l){t&1&&(n(0,"div",102),p(1,"ion-spinner",103),n(2,"span"),r(3,"Finding best offers..."),i()())}function tt(t,l){if(t&1){let e=O();B(0),n(1,"div",105)(2,"div",106)(3,"div",107),p(4,"ion-icon",108),i(),n(5,"div",109)(6,"span",110),r(7," Add "),n(8,"strong"),r(9),i(),r(10," to unlock "),n(11,"strong",111),r(12),i()(),n(13,"span",112),r(14),i()()(),n(15,"button",113),_("click",function(){u(e);let s=c(2).$implicit,f=c(2);return x(f.goToVendor(s.vendorId))}),r(16,"Add items"),i()(),n(17,"div",114),p(18,"div",115),ie(19,"number"),i(),E()}if(t&2){let e=l.ngIf,a=c(2).$implicit,s=c(2);o(9),g("\u20B9",s.getVendorNudgeAmount(a)," more"),o(3),v(s.getVendorNudgeLabel(e)),o(2),v(e.title),o(4),Z("width",oe(19,5,a.subtotal/e.minOrderAmount*100,"1.0-0"),"%")}}function nt(t,l){if(t&1){let e=O();n(0,"div",116)(1,"div",117)(2,"div",118),p(3,"ion-icon",119),i(),n(4,"div",120)(5,"span",121)(6,"span",122),r(7,"AUTO APPLIED"),i()(),n(8,"span",123),r(9),i(),n(10,"span",124),p(11,"ion-icon",125),r(12),i()()(),n(13,"button",126),_("click",function(){u(e);let s=c(2).$implicit,f=c(2);return x(f.removeVendorOffer(s))}),r(14,"REMOVE"),i()()}if(t&2){let e=c(2).$implicit;o(9),T(" ",e.appliedOffer.code?e.appliedOffer.code+" \xB7 ":"","",e.appliedOffer.title," "),o(3),g(" You save \u20B9",e.offerDiscount," on this order! ")}}function it(t,l){if(t&1&&(B(0),m(1,tt,20,8,"ng-container",39)(2,nt,15,3,"div",104),E()),t&2){let e=c().$implicit,a=c(2);o(),d("ngIf",a.getVendorBestNudgeOffer(e)),o(),d("ngIf",e.appliedOffer)}}function ot(t,l){if(t&1&&(n(0,"span",127),r(1),i()),t&2){let e=c().$implicit;o(),g("\u20B9",e.subtotal.toFixed(2))}}function rt(t,l){if(t&1){let e=O();n(0,"div",55)(1,"div",56),_("click",function(){let s=u(e).$implicit,f=c(2);return x(f.goToVendor(s.vendorId))}),n(2,"div",57),p(3,"img",58),i(),n(4,"div",59)(5,"h4",60),r(6),i(),m(7,We,2,1,"p",61),i(),p(8,"ion-icon",62),i(),m(9,Ze,27,10,"div",63),n(10,"div",64)(11,"span",65),r(12,"Need anything else?"),i(),n(13,"button",66),_("click",function(){let s=u(e).$implicit,f=c(2);return x(f.goToVendor(s.vendorId))}),r(14,"Add more"),i()(),n(15,"div",67),m(16,et,4,0,"div",68)(17,it,3,2,"ng-container",39),n(18,"div",69)(19,"span",70),r(20,"Subtotal"),i(),n(21,"div",71),m(22,ot,2,1,"span",72),n(23,"span",73),r(24),i()()()()()}if(t&2){let e=l.$implicit,a=c(2);o(3),d("src",a.getVendorImage(e),q)("alt",e.vendorName),o(3),v(e.vendorName),o(),d("ngIf",e.vendorCuisine),o(2),d("ngForOf",e.items),o(7),d("ngIf",a.isLoadingOffers),o(),d("ngIf",!a.isLoadingOffers),o(5),d("ngIf",e.offerDiscount),o(),K("amount-savings",e.offerDiscount),o(),g(" \u20B9",(e.subtotal-(e.offerDiscount||0)).toFixed(2)," ")}}function at(t,l){if(t&1){let e=O();n(0,"div",133),_("click",function(){u(e);let s=c(3);return x(s.toggleOfferSheet())}),n(1,"div",134),p(2,"ion-icon",135),n(3,"span",136),r(4,"Apply Coupon"),i()(),p(5,"ion-icon",137),i()}}function st(t,l){if(t&1){let e=O();n(0,"div",138),_("click",function(){u(e);let s=c(3);return x(s.toggleOfferSheet())}),n(1,"div",139),p(2,"ion-icon",140),n(3,"span",141),r(4," Best offer: "),n(5,"strong"),r(6),i(),r(7," saves "),n(8,"strong"),r(9),i()()(),n(10,"button",142),_("click",function(s){u(e);let f=c(3);return s.stopPropagation(),x(f.applyOffer(f.getBestOffer()))}),r(11,"APPLY"),i()()}if(t&2){let e=c(3);o(6),v(e.getBestOffer().code||e.getBestOffer().title),o(3),g("\u20B9",e.getOfferSavings(e.getBestOffer()))}}function ct(t,l){t&1&&(n(0,"div",143),p(1,"ion-spinner",103),n(2,"span"),r(3,"Finding best offers..."),i()())}function dt(t,l){if(t&1&&(n(0,"p",169),r(1),i()),t&2){let e=c().$implicit;o(),v(e.description)}}function lt(t,l){if(t&1&&(n(0,"span",170),r(1),i()),t&2){let e=c().$implicit;o(),v(e.code)}}function ft(t,l){if(t&1&&(n(0,"span",171),r(1),i()),t&2){let e=c().$implicit;o(),g("Min \u20B9",e.minOrderAmount)}}function pt(t,l){if(t&1&&(n(0,"span",172),r(1),i()),t&2){let e=c().$implicit;o(),v(e.vendor.name)}}function gt(t,l){if(t&1){let e=O();n(0,"div",156)(1,"div",157)(2,"div",158),p(3,"ion-icon",159),n(4,"span",160),r(5),i(),n(6,"span",161),r(7),i()(),m(8,dt,2,1,"p",162),n(9,"div",163),m(10,lt,2,1,"span",164)(11,ft,2,1,"span",165),n(12,"span",166),r(13),i(),m(14,pt,2,1,"span",167),i()(),n(15,"button",168),_("click",function(){let s=u(e).$implicit,f=c(5);return x(f.applyOffer(s))}),r(16,"APPLY"),i()()}if(t&2){let e=l.$implicit,a=c(5);o(3),d("name",e.icon||"pricetag-outline"),o(2),v(e.title),o(2),v(a.getOfferLabel(e)),o(),d("ngIf",e.description),o(2),d("ngIf",e.code),o(),d("ngIf",e.minOrderAmount>0),o(2),g("Saves \u20B9",a.getOfferSavings(e)),o(),d("ngIf",e.vendor==null?null:e.vendor.name)}}function mt(t,l){if(t&1&&(n(0,"div",153)(1,"h4",154),r(2),i(),m(3,gt,17,8,"div",155),i()),t&2){let e=c(4);o(2),g("Available Offers (",e.applicableOffers.length,")"),o(),d("ngForOf",e.applicableOffers)}}function _t(t,l){if(t&1){let e=O();n(0,"div",173)(1,"p"),r(2,"No applicable offers for this order"),i(),n(3,"button",174),_("click",function(){u(e);let s=c(4);return x(s.goToDeals())}),r(4,"Browse all deals"),i()()}}function ut(t,l){t&1&&(n(0,"div",175),p(1,"ion-spinner",103),n(2,"span"),r(3,"Loading offers..."),i()())}function xt(t,l){if(t&1){let e=O();n(0,"div",144)(1,"div",145),_("click",function(){u(e);let s=c(3);return x(s.toggleOfferSheet())}),n(2,"div",134),p(3,"ion-icon",135),n(4,"span",136),r(5,"Apply Coupon"),i()(),p(6,"ion-icon",146),i(),n(7,"div",147)(8,"input",148),ne("ngModelChange",function(s){u(e);let f=c(3);return te(f.couponCode,s)||(f.couponCode=s),x(s)}),_("keyup.enter",function(){u(e);let s=c(3);return x(s.applyCouponCode())}),i(),n(9,"button",149),_("click",function(){u(e);let s=c(3);return x(s.applyCouponCode())}),r(10," APPLY "),i()(),m(11,mt,4,2,"div",150)(12,_t,5,0,"div",151)(13,ut,4,0,"div",152),i()}if(t&2){let e=c(3);o(8),ee("ngModel",e.couponCode),o(),d("disabled",!e.couponCode.trim()),o(2),d("ngIf",e.applicableOffers.length>0),o(),d("ngIf",e.applicableOffers.length===0&&!e.isLoadingOffers),o(),d("ngIf",e.isLoadingOffers)}}function vt(t,l){if(t&1&&(n(0,"div",128),m(1,at,6,0,"div",129)(2,st,12,2,"div",130)(3,ct,4,0,"div",131)(4,xt,14,5,"div",132),i()),t&2){let e=c(2);o(),d("ngIf",!e.showOfferSheet),o(),d("ngIf",!e.showOfferSheet&&e.getBestOffer()&&!e.isLoadingOffers),o(),d("ngIf",!e.showOfferSheet&&e.isLoadingOffers),o(),d("ngIf",e.showOfferSheet)}}function Ct(t,l){if(t&1){let e=O();n(0,"div",176),p(1,"ion-icon",177),n(2,"div",178)(3,"span",179),r(4),i(),n(5,"span",180),r(6),i()(),n(7,"button",181),_("click",function(){u(e);let s=c(2);return x(s.removeOffer())}),r(8,"REMOVE"),i()()}if(t&2){let e=c(2);o(4),v(e.appliedOffer.code||e.appliedOffer.title),o(2),g("applied \u2014 you save \u20B9",e.couponDiscount)}}function ht(t,l){if(t&1&&(n(0,"span",182),r(1),i()),t&2){let e=c(2);o(),g("\u20B9 ",e.totalOriginalPrice.toFixed(2))}}function Ot(t,l){if(t&1&&(n(0,"div",183)(1,"div",184),p(2,"ion-icon",185),n(3,"span"),r(4,"Restaurant offers"),i()(),n(5,"span",186),r(6),i()()),t&2){let e=c(2);o(6),g("-\u20B9",e.vendorDiscountTotal.toFixed(2))}}function Pt(t,l){if(t&1&&(n(0,"div",187)(1,"span"),r(2),i(),n(3,"span",186),r(4),i()()),t&2){let e=c(2);o(2),g("Coupon (",e.appliedOffer.code||e.appliedOffer.title,")"),o(2),g("-\u20B9",e.couponDiscount.toFixed(2))}}function bt(t,l){if(t&1&&(n(0,"span",188),r(1),i()),t&2){let e=c(2);o(),g(" (",e.feeBreakdown.delivery.maxDistanceKm," km)")}}function yt(t,l){if(t&1&&(B(0),n(1,"span",182),r(2),i(),n(3,"span",189),r(4,"FREE"),i(),E()),t&2){let e=c(3);o(2),g("\u20B9 ",e.feeBreakdown.delivery.originalFee.toFixed(2))}}function Mt(t,l){if(t&1&&(n(0,"span"),r(1),i()),t&2){let e=c(3);o(),g("\u20B9 ",e.feeBreakdown.delivery.fee.toFixed(2))}}function wt(t,l){if(t&1&&(n(0,"div",32),m(1,yt,5,1,"ng-container",39)(2,Mt,2,1,"span",39),i()),t&2){let e=c(2);o(),d("ngIf",e.feeBreakdown.delivery.freeDeliveryApplied),o(),d("ngIf",!e.feeBreakdown.delivery.freeDeliveryApplied)}}function It(t,l){t&1&&(n(0,"span",190),p(1,"ion-spinner",103),i())}function kt(t,l){t&1&&(n(0,"span"),r(1,"--"),i())}function St(t,l){if(t&1&&(n(0,"div",31)(1,"span"),r(2,"Platform fee"),i(),n(3,"span"),r(4),i()()),t&2){let e=c(2);o(4),g("\u20B9 ",e.platformFee.toFixed(2))}}function Bt(t,l){if(t&1&&(n(0,"span",192),r(1),i()),t&2){let e=c(3);o(),g("(",e.feeBreakdown.tax.value,"%)")}}function Et(t,l){if(t&1&&(n(0,"div",31)(1,"span"),r(2),m(3,Bt,2,1,"span",191),i(),n(4,"span"),r(5),i()()),t&2){let e=c(2);o(2),g(" ",e.feeBreakdown.tax.label," "),o(),d("ngIf",e.feeBreakdown.tax.type==="percentage"),o(2),g("\u20B9 ",e.taxAmount.toFixed(2))}}function Tt(t,l){if(t&1){let e=O();n(0,"button",193),_("click",function(){u(e);let s=c(2);return x(s.toggleFeeDetails())}),n(1,"span"),r(2),i(),p(3,"ion-icon",194),i()}if(t&2){let e=c(2);o(2),v(e.showFeeDetails?"Hide details":"View details"),o(),d("name",e.showFeeDetails?"chevron-up-outline":"chevron-down-outline")}}function zt(t,l){if(t&1&&(n(0,"div",199)(1,"span"),r(2),i(),n(3,"span",200),r(4),i()()),t&2){let e=l.$implicit;o(2),v(e.vendorName),o(2),g("",e.distanceKm," km")}}function Dt(t,l){if(t&1&&(n(0,"div",199)(1,"span"),r(2),i(),n(3,"span",200),r(4),i()()),t&2){let e=c(3);o(2),T("Extra distance (",(e.feeBreakdown.delivery.maxDistanceKm-e.feeBreakdown.delivery.baseDistanceKm).toFixed(1)," km x \u20B9",e.feeBreakdown.delivery.perKmCharge,")"),o(2),g("\u20B9 ",((e.feeBreakdown.delivery.maxDistanceKm-e.feeBreakdown.delivery.baseDistanceKm)*e.feeBreakdown.delivery.perKmCharge).toFixed(2))}}function Ft(t,l){if(t&1&&(n(0,"div",204)(1,"span"),r(2),i()()),t&2){let e=c(3);o(2),T("Multi-store surcharge (",e.feeBreakdown.delivery.storeCount," stores, +",(e.feeBreakdown.delivery.storeCount-1)*e.feeBreakdown.delivery.multiStoreSurchargePercent,"%)")}}function Vt(t,l){if(t&1&&(n(0,"div",204),p(1,"ion-icon",205),n(2,"span"),r(3),i()()),t&2){let e=c(3);o(3),g("Free delivery applied (order above \u20B9",e.feeBreakdown.delivery.freeDeliveryThreshold,")")}}function At(t,l){if(t&1&&(n(0,"div",204),p(1,"ion-icon",206),n(2,"span"),r(3),i()()),t&2){let e=c(3);o(3),g("Add \u20B9",(e.feeBreakdown.delivery.freeDeliveryThreshold-e.totalDiscountedPrice).toFixed(0)," more for free delivery")}}function Rt(t,l){if(t&1&&(n(0,"div",196)(1,"div",197),r(2,"Platform fee"),i(),n(3,"div",199)(4,"span"),r(5,"Service & operations charge"),i(),n(6,"span",200),r(7),i()()()),t&2){let e=c(3);o(7),g("\u20B9 ",e.platformFee.toFixed(2))}}function jt(t,l){if(t&1&&(n(0,"span"),r(1),i()),t&2){let e=c(4);o(),g("",e.feeBreakdown.tax.value,"% on item total")}}function Lt(t,l){t&1&&(n(0,"span"),r(1,"Flat tax"),i())}function Nt(t,l){if(t&1&&(n(0,"div",196)(1,"div",197),r(2),i(),n(3,"div",199),m(4,jt,2,1,"span",39)(5,Lt,2,0,"span",39),n(6,"span",200),r(7),i()()()),t&2){let e=c(3);o(2),v(e.feeBreakdown.tax.label),o(2),d("ngIf",e.feeBreakdown.tax.type==="percentage"),o(),d("ngIf",e.feeBreakdown.tax.type==="flat"),o(2),g("\u20B9 ",e.taxAmount.toFixed(2))}}function $t(t,l){if(t&1&&(n(0,"div",195)(1,"div",196)(2,"div",197),r(3,"Delivery breakdown"),i(),m(4,zt,5,2,"div",198),n(5,"div",199)(6,"span"),r(7),i(),n(8,"span",200),r(9),i()(),m(10,Dt,5,3,"div",201)(11,Ft,3,2,"div",202)(12,Vt,4,1,"div",202)(13,At,4,1,"div",202),i(),m(14,Rt,8,1,"div",203)(15,Nt,8,4,"div",203),i()),t&2){let e=c(2);o(4),d("ngForOf",e.feeBreakdown.delivery.vendorDistances),o(3),g("Base fee (first ",e.feeBreakdown.delivery.baseDistanceKm," km)"),o(2),g("\u20B9 ",e.feeBreakdown.delivery.baseFee),o(),d("ngIf",e.feeBreakdown.delivery.maxDistanceKm>e.feeBreakdown.delivery.baseDistanceKm),o(),d("ngIf",e.feeBreakdown.delivery.storeCount>1),o(),d("ngIf",e.feeBreakdown.delivery.freeDeliveryApplied),o(),d("ngIf",!e.feeBreakdown.delivery.freeDeliveryApplied&&e.feeBreakdown.delivery.freeDeliveryThreshold>0),o(),d("ngIf",e.platformFee>0),o(),d("ngIf",e.taxAmount>0)}}function Ut(t,l){if(t&1&&(n(0,"span"),r(1),i()),t&2){let e=c(3);o(),g(" with ",e.appliedOffer.code||e.appliedOffer.title)}}function Gt(t,l){if(t&1&&(n(0,"p",207),r(1),m(2,Ut,2,1,"span",39),i()),t&2){let e=c(2);o(),g("You saved \u20B9 ",e.totalSaved.toFixed(2)),o(),d("ngIf",e.appliedOffer)}}function qt(t,l){if(t&1){let e=O();n(0,"div",16)(1,"div",17)(2,"h3",18),r(3,"Delivery location"),i(),n(4,"div",19)(5,"div",20),m(6,$e,3,1,"p",21)(7,Ue,3,0,"p",21)(8,qe,3,2,"p",22),i(),n(9,"button",23),_("click",function(){u(e);let s=c();return x(s.changeLocation())}),r(10,"Change location"),i()(),n(11,"div",24)(12,"button",25),r(13,"Add note"),i()(),m(14,Ke,3,1,"div",26),i(),p(15,"div",27),m(16,rt,25,11,"div",28),p(17,"div",27),m(18,vt,5,4,"div",29)(19,Ct,9,2,"div",30),n(20,"div",17)(21,"h3",18),r(22,"Payment summary"),i(),n(23,"div",31)(24,"span"),r(25,"Price"),i(),n(26,"div",32),m(27,ht,2,1,"span",33),n(28,"span"),r(29),i()()(),m(30,Ot,7,1,"div",34)(31,Pt,5,2,"div",35),n(32,"div",31)(33,"span"),r(34,"Delivery fee"),m(35,bt,2,1,"span",36),i(),m(36,wt,3,2,"div",37)(37,It,2,0,"span",38)(38,kt,2,0,"span",39),i(),m(39,St,5,1,"div",40)(40,Et,6,3,"div",40),n(41,"div",41)(42,"span"),r(43,"Total payment"),i(),n(44,"span",42),r(45),i()(),m(46,Tt,4,2,"button",43)(47,$t,16,9,"div",44),i(),n(48,"div",45),p(49,"ion-icon",46),n(50,"span",47),r(51,"My wallet"),i(),p(52,"ion-icon",48),n(53,"span",49),r(54,"\xB7"),i(),n(55,"span",50),r(56),i()(),m(57,Gt,3,2,"p",51),i()}if(t&2){let e=c();o(6),d("ngIf",e.feeBreakdown),o(),d("ngIf",!e.feeBreakdown&&!e.isLoadingFees),o(),d("ngIf",e.feeBreakdown),o(6),d("ngIf",e.userAddress),o(2),d("ngForOf",e.vendorGroups),o(2),d("ngIf",!e.appliedOffer),o(),d("ngIf",e.appliedOffer),o(8),d("ngIf",e.totalOriginalPrice>e.totalDiscountedPrice),o(2),g("\u20B9 ",e.totalDiscountedPrice.toFixed(2)),o(),d("ngIf",e.vendorDiscountTotal>0),o(),d("ngIf",e.appliedOffer),o(4),d("ngIf",e.feeBreakdown),o(),d("ngIf",!e.isLoadingFees&&e.feeBreakdown),o(),d("ngIf",e.isLoadingFees),o(),d("ngIf",!e.isLoadingFees&&!e.feeBreakdown),o(),d("ngIf",e.feeBreakdown&&e.platformFee>0),o(),d("ngIf",e.feeBreakdown&&e.taxAmount>0),o(5),g("\u20B9 ",e.totalPayment.toFixed(2)),o(),d("ngIf",e.feeBreakdown),o(),d("ngIf",e.showFeeDetails&&e.feeBreakdown),o(9),g("\u20B9 ",e.totalPayment.toFixed(2)),o(),d("ngIf",e.totalSaved>0)}}function Kt(t,l){if(t&1&&(n(0,"span",221),r(1),i()),t&2){let e=c(3);o(),g(" Order ",e.activeOrder.orderId," is in progress ")}}function Wt(t,l){if(t&1&&(n(0,"span",221),r(1),i()),t&2){let e=c(3);o(),g(" ",e.activeOrderCount," orders in progress ")}}function Yt(t,l){if(t&1){let e=O();n(0,"div",212)(1,"div",213),p(2,"ion-icon",214),n(3,"div",215),m(4,Kt,2,1,"span",216)(5,Wt,2,1,"span",216),n(6,"span",217),r(7,"You can still place another order."),i()()(),n(8,"div",218)(9,"button",219),_("click",function(){u(e);let s=c(2);return x(s.router.navigate(["/tabs/orders"]))}),r(10,"View"),i(),n(11,"button",220),_("click",function(){u(e);let s=c(2);return x(s.setForcePlace())}),r(12),i()()()}if(t&2){let e=c(2);o(4),d("ngIf",e.activeOrderCount===1),o(),d("ngIf",e.activeOrderCount>1),o(6),K("active",e.forcePlace),o(),g(" ",e.forcePlace?"Will place":"Place anyway"," ")}}function Ht(t,l){t&1&&(n(0,"span",222),p(1,"ion-spinner",223),i())}function Jt(t,l){if(t&1){let e=O();n(0,"ion-footer",0),m(1,Yt,13,5,"div",208),n(2,"div",209)(3,"button",210),_("click",function(){u(e);let s=c();return x(s.openPaymentModal())}),m(4,Ht,2,0,"span",211),n(5,"span"),r(6),i()()()()}if(t&2){let e=c();o(),d("ngIf",e.activeOrderCount>0),o(2),d("disabled",e.isCheckoutLoading),o(),d("ngIf",e.isCheckoutLoading),o(2),v(e.isCheckoutLoading?"Preparing summary...":"Place order")}}var ze=(()=>{class t{get activeOrder(){return this.activeOrders[0]||null}get activeOrderCount(){return this.activeOrders.length}constructor(e,a,s,f,w,C,b,N,P,y,M){this.modalCtrl=e,this.router=a,this.eventBus=s,this.dealsService=f,this.homeMainService=w,this.storageService=C,this.commonService=b,this.cartService=N,this.orderService=P,this.platform=y,this.cdr=M,this.cartItems=[],this.vendorGroups=[],this.imgBaseUrl=Pe.imageBaseUrl,this.applicableOffers=[],this.appliedOffer=null,this.couponDiscount=0,this.showOfferSheet=!1,this.couponCode="",this.isLoadingOffers=!1,this.localityId="",this.vendorAllOffers={},this.feeBreakdown=null,this.isLoadingFees=!1,this.showFeeDetails=!1,this.userAddress=null,this.activeOrders=[],this.forcePlace=!1}ngOnInit(){}ionViewWillEnter(){this.loadCart()}ionViewDidEnter(){this.backButtonSub=this.platform.backButton.subscribeWithPriority(9999,()=>{this.goBack()})}ionViewWillLeave(){this.backButtonSub&&(this.backButtonSub.unsubscribe(),this.backButtonSub=void 0)}ngOnDestroy(){this.backButtonSub&&(this.backButtonSub.unsubscribe(),this.backButtonSub=void 0)}loadCart(){let e=localStorage.getItem("cart-items");if(!e){this.cartItems=[],this.vendorGroups=[];return}try{let a=JSON.parse(e)||[];this.cartItems=a.map(s=>{let f=s.vendor||{};return H(Y({},s),{itemCount:s.itemCount||s.quantity||1,vendorId:s.vendorId||f._id||"unknown",vendorName:s.vendorName||f.businessName||f.name||"Unknown Restaurant",vendorImage:s.vendorImage||f.imageUrl||"",vendorCuisine:s.vendorCuisine||f.cuisineType||""})}),localStorage.setItem("cart-items",JSON.stringify(this.cartItems))}catch(a){this.cartItems=[]}this.buildVendorGroups(),this.loadApplicableOffers()}buildVendorGroups(){let e=new Map;for(let a of this.cartItems){let s=a.vendorId||"unknown";e.has(s)||e.set(s,{vendorId:s,vendorName:a.vendorName||"Unknown Restaurant",vendorImage:a.vendorImage||"",vendorCuisine:a.vendorCuisine||"",items:[],subtotal:0});let f=e.get(s);f.items.push(a),f.subtotal+=a.price*a.itemCount}this.vendorGroups=Array.from(e.values())}loadApplicableOffers(){if(this.isCartEmpty)return;let e=this.storageService.getUser();e?._id&&(this.isLoadingOffers=!0,this.orderService.getActiveOrder(e._id).subscribe({next:a=>{this.activeOrders=a?.data||[],this.cdr.detectChanges()},error:()=>{this.activeOrders=[]}}),this.homeMainService.getDefaultAddressByUserId(e._id).subscribe({next:a=>{a?.status&&a?.data?.locality?(this.localityId=a.data.locality._id,this.userAddress=a.data,this.fetchOffers(),this.calculateCartFees()):(this.isLoadingOffers=!1,this.cdr.detectChanges())},error:()=>{this.isLoadingOffers=!1,this.cdr.detectChanges()}}))}setForcePlace(){this.forcePlace=!0,this.cdr.detectChanges()}fetchOffers(){let e=this.vendorGroups.map(f=>f.vendorId).filter(f=>f!=="unknown");if(e.length===0){this.isLoadingOffers=!1;return}let a=this.totalDiscountedPrice,s={};this.vendorGroups.forEach(f=>{f.vendorId!=="unknown"&&(s[f.vendorId]=f.subtotal)}),J({applicable:this.dealsService.getApplicableOffers(this.localityId,e,a,s).pipe(G(()=>U(null))),allDeals:this.dealsService.getDealsPage(this.localityId).pipe(G(()=>U(null)))}).subscribe(({applicable:f,allDeals:w})=>{let C=w?.data?.restaurantOffers||[];this.vendorAllOffers={};for(let P of C){let y=P.vendor?._id;y&&(this.vendorAllOffers[y]||(this.vendorAllOffers[y]=[]),this.vendorAllOffers[y].push(P))}let b=f?.status&&f?.data?f.data:[];for(let P of this.vendorGroups){let y=b.filter(M=>M.type==="restaurant"&&M.vendor?._id===P.vendorId).sort((M,Fe)=>(Fe.calculatedDiscount||0)-(M.calculatedDiscount||0))[0];P.appliedOffer=y||void 0,P.offerDiscount=y&&y.calculatedDiscount||0}let N=new Set(this.vendorGroups.filter(P=>P.appliedOffer).map(P=>P.appliedOffer._id));this.applicableOffers=b.filter(P=>!N.has(P._id)),this.isLoadingOffers=!1,this.appliedOffer&&this.revalidateAppliedOffer(),this.cdr.detectChanges()})}revalidateAppliedOffer(){if(!this.appliedOffer)return;if(this.applicableOffers.some(a=>a._id===this.appliedOffer._id)){let a=this.applicableOffers.find(s=>s._id===this.appliedOffer._id);a&&(this.couponDiscount=a.calculatedDiscount,this.appliedOffer=a)}else{let a=this.appliedOffer.code||this.appliedOffer.title;this.appliedOffer=null,this.couponDiscount=0,this.commonService.presentToast("bottom",`Offer "${a}" removed \u2014 order no longer meets requirements`,"danger"),this.cdr.detectChanges()}}applyOffer(e){this.appliedOffer=e,this.couponDiscount=e.calculatedDiscount||0,this.showOfferSheet=!1,this.couponCode="";let a=e.code||e.title;this.commonService.presentToast("bottom",`${a} applied \u2014 you save \u20B9${this.couponDiscount}`,"success"),this.cdr.detectChanges()}removeOffer(){this.appliedOffer=null,this.couponDiscount=0,this.cdr.detectChanges()}removeVendorOffer(e){e.appliedOffer=void 0,e.offerDiscount=0,this.cdr.detectChanges()}getVendorBestNudgeOffer(e){return e.appliedOffer?null:(this.vendorAllOffers[e.vendorId]||[]).filter(s=>s.minOrderAmount>0&&s.minOrderAmount>e.subtotal&&s.minOrderAmount-e.subtotal<=300).sort((s,f)=>s.minOrderAmount-e.subtotal-(f.minOrderAmount-e.subtotal))[0]||null}getVendorNudgeAmount(e){let a=this.getVendorBestNudgeOffer(e);return a?Math.ceil(a.minOrderAmount-e.subtotal):0}getVendorNudgeLabel(e){return e?e.discountType==="percentage"?`${e.discountValue}% OFF`:`\u20B9${e.discountValue} OFF`:""}applyCouponCode(){if(!this.couponCode.trim())return;let e=new Date,a=`${e.getHours().toString().padStart(2,"0")}:${e.getMinutes().toString().padStart(2,"0")}`;this.dealsService.validateCoupon({code:this.couponCode.trim(),localityId:this.localityId,orderAmount:this.totalDiscountedPrice,clientTime:a}).subscribe({next:s=>{s?.status&&s?.data?(this.appliedOffer=s.data.offer,this.couponDiscount=s.data.discountAmount,this.showOfferSheet=!1,this.couponCode="",this.commonService.presentToast("bottom",`${s.data.offer.code||s.data.offer.title} applied \u2014 you save \u20B9${this.couponDiscount}`,"success")):this.commonService.presentToast("bottom",s?.message||"Invalid coupon code","danger"),this.cdr.detectChanges()},error:s=>{let f=s?.error?.message||"Invalid or expired coupon code";this.commonService.presentToast("bottom",f,"danger"),this.cdr.detectChanges()}})}toggleOfferSheet(){this.showOfferSheet=!this.showOfferSheet}getOfferSavings(e){return e.calculatedDiscount||0}getBestOffer(){return this.applicableOffers.length===0?null:this.applicableOffers[0]}getOfferLabel(e){return e.discountType==="percentage"?`${e.discountValue}% OFF`:`\u20B9${e.discountValue} OFF`}get isCartEmpty(){return this.cartItems.length===0}get hasMultipleVendors(){return this.vendorGroups.length>1}get totalOriginalPrice(){return this.cartItems.reduce((e,a)=>{let s=a.basePrice||a.price;return e+s*a.itemCount},0)}get totalDiscountedPrice(){return this.cartItems.reduce((e,a)=>e+a.price*a.itemCount,0)}get deliveryFee(){return this.feeBreakdown?.delivery?.fee??0}get platformFee(){return this.feeBreakdown?.platformFee??0}get taxAmount(){return this.feeBreakdown?.tax?.amount??0}get vendorDiscountTotal(){return this.vendorGroups.reduce((e,a)=>e+(a.offerDiscount||0),0)}get totalPayment(){return Math.max(0,this.totalDiscountedPrice-this.vendorDiscountTotal-this.couponDiscount+this.deliveryFee+this.platformFee+this.taxAmount)}get totalSaved(){return this.totalOriginalPrice-this.totalDiscountedPrice+this.vendorDiscountTotal+this.couponDiscount}get totalItems(){return this.cartItems.reduce((e,a)=>e+a.itemCount,0)}get isCheckoutLoading(){return this.isCartEmpty?!1:this.isLoadingOffers||this.isLoadingFees||!this.userAddress||!this.feeBreakdown}incrementItem(e){e.itemCount++,this.saveAndRefresh()}decrementItem(e){e.itemCount--,e.itemCount<=0&&(this.cartItems=this.cartItems.filter(a=>a!==e)),this.saveAndRefresh()}saveAndRefresh(){localStorage.setItem("cart-items",JSON.stringify(this.cartItems)),this.eventBus.emit("cart:updated",this.totalItems),this.buildVendorGroups(),this.localityId&&(this.fetchOffers(),this.calculateCartFees())}calculateCartFees(){if(this.isCartEmpty||!this.localityId||!this.userAddress)return;let e=this.vendorGroups.map(s=>s.vendorId).filter(s=>s!=="unknown");if(e.length===0)return;let a=this.userAddress.coords;!a?.lat||!a?.lng||(this.isLoadingFees=!0,this.cartService.calculateFees({localityId:this.localityId,vendorIds:e,userLat:a.lat,userLng:a.lng,orderSubtotal:this.totalDiscountedPrice}).subscribe({next:s=>{s?.status&&s?.data&&(this.feeBreakdown=s.data),this.isLoadingFees=!1,this.cdr.detectChanges()},error:()=>{this.isLoadingFees=!1,this.cdr.detectChanges()}}))}toggleFeeDetails(){this.showFeeDetails=!this.showFeeDetails}getItemImage(e){return e.imageUrl?this.imgBaseUrl+e.imageUrl:e.dummyImg||"assets/announcement-banner.jpg"}getVendorImage(e){return e.vendorImage?e.vendorImage.startsWith("http")||e.vendorImage.startsWith("assets/")?e.vendorImage:this.imgBaseUrl+e.vendorImage:"assets/shop.jpg"}goToVendor(e){e&&e!=="unknown"&&this.router.navigate(["/items"],{queryParams:{vendorId:e}})}goBack(){this.router.navigate(["/tabs/home-main"])}clearCart(){localStorage.removeItem("cart-items"),this.cartItems=[],this.vendorGroups=[],this.appliedOffer=null,this.couponDiscount=0,this.applicableOffers=[],this.feeBreakdown=null,this.eventBus.emit("cart:updated",0)}browsRestaurants(){this.router.navigate(["/home-land"])}goToDeals(){this.router.navigate(["/tabs/deals"])}changeLocation(){this.router.navigate(["/location-setup"])}openPaymentModal(){return $(this,null,function*(){if(this.isCheckoutLoading)return;let a={userId:this.storageService.getUser()._id,localityId:this.localityId,vendorOrders:this.vendorGroups.map(C=>({vendor:C.vendorId,vendorName:C.vendorName,vendorAddress:"",items:C.items.map(b=>({product:b._id,productName:b.productName,quantity:b.itemCount,price:b.price,actualPrice:b.basePrice||b.price,totalPrice:b.price*b.itemCount})),subtotal:C.subtotal,offerDiscount:C.offerDiscount||0,appliedOffer:C.appliedOffer?{offerId:C.appliedOffer._id,offerTitle:C.appliedOffer.title,offerCode:C.appliedOffer.code||"",offerType:C.appliedOffer.type||C.appliedOffer.offerType||"restaurant",discountType:C.appliedOffer.discountType||"percentage",discountValue:C.appliedOffer.discountValue||0,maxDiscountCap:C.appliedOffer.maxDiscountCap??null,minOrderAmount:C.appliedOffer.minOrderAmount||0,discountAmount:C.offerDiscount||0}:void 0,status:"placed"})),deliveryAddress:{addressId:this.userAddress?._id,label:this.userAddress?.addressType||"Home",fullAddress:this.userAddress?.fullAddress||this.userAddress?.addressLine1||"",landmark:this.userAddress?.landmark||"",coords:this.userAddress?.coords||{lat:0,lng:0}},itemTotal:this.totalDiscountedPrice,vendorDiscounts:this.vendorDiscountTotal,couponDiscount:this.couponDiscount,appliedCoupon:this.appliedOffer?{code:this.appliedOffer.code||"",offerId:this.appliedOffer._id,offerTitle:this.appliedOffer.title||"",offerType:this.appliedOffer.type||this.appliedOffer.offerType||"platform_coupon",discountType:this.appliedOffer.discountType||"percentage",discountValue:this.appliedOffer.discountValue||0,maxDiscountCap:this.appliedOffer.maxDiscountCap??null,minOrderAmount:this.appliedOffer.minOrderAmount||0,discountAmount:this.couponDiscount}:void 0,deliveryFee:this.deliveryFee,platformFee:this.platformFee,taxAmount:this.taxAmount,totalAmount:this.totalPayment,forcePlace:this.forcePlace},s=yield this.modalCtrl.create({component:Ie,componentProps:{totalAmount:this.totalPayment,totalItems:this.totalItems,totalSaved:this.totalSaved,appliedOffer:this.appliedOffer,couponDiscount:this.couponDiscount,deliveryFee:this.deliveryFee,platformFee:this.platformFee,taxAmount:this.taxAmount,feeBreakdown:this.feeBreakdown,deliveryAddress:this.userAddress?.fullAddress||"",orderPayload:a},cssClass:"payment-confirm-modal"});yield s.present();let{data:f,role:w}=yield s.onWillDismiss();w==="confirm"&&(yield this.openOrderStatus(f?.orderId))})}openOrderStatus(e=""){return $(this,null,function*(){let a=yield this.modalCtrl.create({component:Ee,componentProps:{orderCode:e},cssClass:"order-status-modal",backdropDismiss:!1,showBackdrop:!1});yield a.present();let{data:s,role:f}=yield a.onWillDismiss();f!=="cancel"&&(this.cartItems=[],this.vendorGroups=[],this.appliedOffer=null,this.couponDiscount=0,s?.action==="track"?this.router.navigate(["/tabs/orders"],{queryParams:{highlight:e}}):this.router.navigate(["/tabs/home-main"]))})}static{this.\u0275fac=function(a){return new(a||t)(h(A),h(se),h(j),h(Se),h(we),h(Oe),h(Me),h(Te),h(ye),h(pe),h(z))}}static{this.\u0275cmp=k({type:t,selectors:[["app-cart"]],standalone:!1,decls:14,vars:4,consts:[[1,"ion-no-border"],["slot","start"],[3,"click"],["slot","icon-only","name","arrow-back","color","dark"],[1,"cart-title"],["slot","end"],["slot","icon-only","name","heart-outline","color","danger"],[3,"fullscreen"],["class","empty-state",4,"ngIf"],["class","cart-content",4,"ngIf"],["class","ion-no-border",4,"ngIf"],[1,"empty-state"],["name","cart-outline",1,"empty-icon"],[1,"empty-title"],[1,"empty-subtitle"],[1,"browse-btn",3,"click"],[1,"cart-content"],[1,"section-block"],[1,"section-heading"],[1,"delivery-card"],[1,"delivery-info"],["class","delivery-distance",4,"ngIf"],["class","delivery-meta",4,"ngIf"],[1,"link-btn",3,"click"],[1,"action-chips"],[1,"chip-btn"],["class","address-box",4,"ngIf"],[1,"divider"],["class","vendor-group",4,"ngFor","ngForOf"],["class","coupon-section",4,"ngIf"],["class","coupon-applied",4,"ngIf"],[1,"summary-row"],[1,"summary-prices"],["class","original-price",4,"ngIf"],["class","summary-row vendor-savings-row",4,"ngIf"],["class","summary-row coupon-savings-row",4,"ngIf"],["class","delivery-km",4,"ngIf"],["class","summary-prices",4,"ngIf"],["class","inline-spinner",4,"ngIf"],[4,"ngIf"],["class","summary-row",4,"ngIf"],[1,"summary-row","total-row"],[1,"total-amount"],["class","view-details-link",3,"click",4,"ngIf"],["class","fee-details-expand",4,"ngIf"],[1,"payment-method"],["name","wallet-outline",1,"wallet-icon"],[1,"wallet-label"],["name","chevron-down-outline",1,"wallet-arrow"],[1,"wallet-dot"],[1,"wallet-amount"],["class","savings-text",4,"ngIf"],[1,"delivery-distance"],[1,"delivery-meta"],[1,"address-box"],[1,"vendor-group"],[1,"vendor-header",3,"click"],[1,"vendor-avatar"],[3,"src","alt"],[1,"vendor-info"],[1,"vendor-name"],["class","vendor-cuisine",4,"ngIf"],["name","chevron-forward-outline",1,"vendor-arrow"],["class","cart-item",4,"ngFor","ngForOf"],[1,"add-more-row"],[1,"add-more-label"],[1,"add-more-btn",3,"click"],[1,"vendor-offer-area"],["class","vendor-offer-loading",4,"ngIf"],[1,"vendor-subtotal"],[1,"subtotal-label"],[1,"vendor-subtotal-prices"],["class","subtotal-original",4,"ngIf"],[1,"subtotal-amount"],[1,"vendor-cuisine"],[1,"cart-item"],[1,"cart-item-left"],[1,"item-type-row"],["src","assets/non-veg.png","class","type-icon",4,"ngIf"],["src","assets/veg.png","class","type-icon",4,"ngIf"],["src","assets/egg.png","class","type-icon",4,"ngIf"],[1,"cart-item-name"],["class","cart-item-customization",4,"ngIf"],[1,"cart-item-price-row"],[1,"cart-item-price"],["class","cart-item-original",4,"ngIf"],[1,"cart-item-actions"],[1,"qty-control"],[1,"qty-btn",3,"click"],["name","remove-outline"],[1,"qty-count"],["name","add-outline"],[1,"note-btn"],[1,"heart-btn"],["name","heart-outline"],[1,"cart-item-right"],[1,"cart-item-img",3,"src","alt"],["src","assets/non-veg.png",1,"type-icon"],["src","assets/veg.png",1,"type-icon"],["src","assets/egg.png",1,"type-icon"],[1,"cart-item-customization"],[1,"cart-item-original"],[1,"vendor-offer-loading"],["name","dots","color","medium"],["class","vendor-offer-auto",4,"ngIf"],[1,"vendor-offer-nudge"],[1,"nudge-left"],[1,"nudge-icon-wrap"],["name","pricetag-outline"],[1,"nudge-text"],[1,"nudge-headline"],[1,"nudge-discount"],[1,"nudge-sub"],[1,"nudge-add-btn",3,"click"],[1,"nudge-progress-wrap"],[1,"nudge-progress-bar"],[1,"vendor-offer-auto"],[1,"vendor-offer-auto-left"],[1,"offer-check-wrap"],["name","checkmark-circle",1,"offer-check-icon"],[1,"vendor-offer-auto-text"],[1,"vendor-offer-auto-label"],[1,"auto-badge"],[1,"vendor-offer-name"],[1,"vendor-offer-auto-savings"],["name","gift-outline"],[1,"vendor-offer-remove-btn",3,"click"],[1,"subtotal-original"],[1,"coupon-section"],["class","coupon-collapsed",3,"click",4,"ngIf"],["class","best-offer-suggestion",3,"click",4,"ngIf"],["class","coupon-loading",4,"ngIf"],["class","coupon-expanded",4,"ngIf"],[1,"coupon-collapsed",3,"click"],[1,"coupon-collapsed-left"],["name","pricetag-outline",1,"coupon-icon"],[1,"coupon-label"],["name","chevron-down-outline",1,"coupon-toggle-icon"],[1,"best-offer-suggestion",3,"click"],[1,"best-offer-info"],["name","gift-outline",1,"best-offer-icon"],[1,"best-offer-text"],[1,"best-offer-apply-btn",3,"click"],[1,"coupon-loading"],[1,"coupon-expanded"],[1,"coupon-expanded-header",3,"click"],["name","chevron-up-outline",1,"coupon-toggle-icon"],[1,"coupon-input-row"],["type","text","placeholder","Enter coupon code",1,"coupon-input",3,"ngModelChange","keyup.enter","ngModel"],[1,"coupon-apply-btn",3,"click","disabled"],["class","offers-list",4,"ngIf"],["class","no-offers",4,"ngIf"],["class","offers-loading",4,"ngIf"],[1,"offers-list"],[1,"offers-list-title"],["class","offer-card-apply",4,"ngFor","ngForOf"],[1,"offer-card-apply"],[1,"offer-card-left"],[1,"offer-card-header"],[1,"offer-card-icon",3,"name"],[1,"offer-card-title"],[1,"offer-card-badge"],["class","offer-card-desc",4,"ngIf"],[1,"offer-card-meta"],["class","offer-code-tag",4,"ngIf"],["class","offer-min",4,"ngIf"],[1,"offer-saves"],["class","offer-vendor-badge",4,"ngIf"],[1,"offer-apply-btn",3,"click"],[1,"offer-card-desc"],[1,"offer-code-tag"],[1,"offer-min"],[1,"offer-vendor-badge"],[1,"no-offers"],[1,"no-offers-link",3,"click"],[1,"offers-loading"],[1,"coupon-applied"],["name","checkmark-circle",1,"applied-icon"],[1,"applied-info"],[1,"applied-code"],[1,"applied-savings"],[1,"applied-remove-btn",3,"click"],[1,"original-price"],[1,"summary-row","vendor-savings-row"],[1,"vendor-savings-label"],["name","storefront-outline",1,"vendor-savings-icon"],[1,"coupon-discount-amount"],[1,"summary-row","coupon-savings-row"],[1,"delivery-km"],[1,"free-badge-inline"],[1,"inline-spinner"],["class","tax-rate",4,"ngIf"],[1,"tax-rate"],[1,"view-details-link",3,"click"],[3,"name"],[1,"fee-details-expand"],[1,"fee-details-section"],[1,"fee-details-title"],["class","fee-detail-row",4,"ngFor","ngForOf"],[1,"fee-detail-row"],[1,"fee-detail-value"],["class","fee-detail-row",4,"ngIf"],["class","fee-detail-row fee-detail-note",4,"ngIf"],["class","fee-details-section",4,"ngIf"],[1,"fee-detail-row","fee-detail-note"],["name","checkmark-circle",1,"free-check-icon"],["name","information-circle-outline",1,"info-icon"],[1,"savings-text"],["class","active-order-banner",4,"ngIf"],[1,"footer-wrap"],[1,"place-order-btn",3,"click","disabled"],["class","place-order-spinner",4,"ngIf"],[1,"active-order-banner"],[1,"aob-info"],["name","time-outline",1,"aob-icon"],[1,"aob-text"],["class","aob-title",4,"ngIf"],[1,"aob-sub"],[1,"aob-actions"],[1,"aob-view-btn",3,"click"],[1,"aob-force-btn",3,"click"],[1,"aob-title"],[1,"place-order-spinner"],["name","crescent"]],template:function(a,s){a&1&&(n(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-buttons",1)(3,"ion-button",2),_("click",function(){return s.goBack()}),p(4,"ion-icon",3),i()(),n(5,"ion-title",4),r(6,"My Cart"),i(),n(7,"ion-buttons",5)(8,"ion-button"),p(9,"ion-icon",6),i()()()(),n(10,"ion-content",7),m(11,Ne,8,0,"div",8)(12,qt,58,22,"div",9),i(),m(13,Jt,7,4,"ion-footer",10)),a&2&&(o(10),d("fullscreen",!0),o(),d("ngIf",s.isCartEmpty),o(),d("ngIf",!s.isCartEmpty),o(),d("ngIf",!s.isCartEmpty))},dependencies:[re,D,ce,de,le,ge,me,_e,ue,xe,V,ve,Ce,he,ae],styles:["ion-toolbar[_ngcontent-%COMP%]{--background: #fff;--border-width: 0}.cart-title[_ngcontent-%COMP%]{font-family:latoBold,sans-serif;font-size:18px;color:#1a1a1a}.empty-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:80px 32px;text-align:center}.empty-state[_ngcontent-%COMP%]   .empty-icon[_ngcontent-%COMP%]{font-size:72px;color:#ddd;margin-bottom:20px}.empty-state[_ngcontent-%COMP%]   .empty-title[_ngcontent-%COMP%]{font-family:latoBold,sans-serif;font-size:20px;color:#1a1a1a;margin:0 0 8px}.empty-state[_ngcontent-%COMP%]   .empty-subtitle[_ngcontent-%COMP%]{font-family:latoRegular,sans-serif;font-size:14px;color:#888;margin:0 0 28px}.empty-state[_ngcontent-%COMP%]   .browse-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f85c70,#fc8c5c);color:#fff;font-family:latoBold,sans-serif;font-size:15px;border:none;border-radius:30px;padding:12px 36px;cursor:pointer}ion-content[_ngcontent-%COMP%]{--background: #f5f5f5}.cart-content[_ngcontent-%COMP%]{padding-bottom:20px}.section-block[_ngcontent-%COMP%]{background:#fff;border-radius:14px;margin:8px 16px;padding:16px;box-shadow:0 2px 8px #0000000f}.section-heading[_ngcontent-%COMP%]{font-family:latoBold,sans-serif;font-size:17px;color:#1a1a1a;margin:0 0 14px}.delivery-card[_ngcontent-%COMP%]{display:flex;align-items:flex-start;justify-content:space-between;background:#fff;border:1px solid #eee;border-radius:12px;padding:14px;margin-bottom:12px}.delivery-card[_ngcontent-%COMP%]   .delivery-info[_ngcontent-%COMP%]{flex:1}.delivery-card[_ngcontent-%COMP%]   .delivery-distance[_ngcontent-%COMP%]{font-family:latoBold,sans-serif;font-size:14px;color:#1a1a1a;margin:0 0 4px}.delivery-card[_ngcontent-%COMP%]   .delivery-meta[_ngcontent-%COMP%]{font-family:latoRegular,sans-serif;font-size:12px;color:#888;margin:0}.link-btn[_ngcontent-%COMP%]{background:none;border:none;color:#f85c70;font-family:latoRegular,sans-serif;font-size:13px;cursor:pointer;white-space:nowrap;padding:0}.action-chips[_ngcontent-%COMP%]{display:flex;gap:8px;margin-bottom:12px}.chip-btn[_ngcontent-%COMP%]{background:#fff;border:1px solid #ddd;border-radius:20px;padding:8px 16px;font-family:latoRegular,sans-serif;font-size:13px;color:#1a1a1a;cursor:pointer}.address-box[_ngcontent-%COMP%]{background:#fff0f1;border-radius:10px;padding:12px 14px}.address-box[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-family:latoRegular,sans-serif;font-size:13px;color:#f85c70;margin:0;line-height:1.4}.divider[_ngcontent-%COMP%]{height:8px;background:#f5f5f5}.vendor-group[_ngcontent-%COMP%]{background:#fff;border-radius:14px;margin:8px 16px;padding:16px;box-shadow:0 2px 8px #0000000f}.vendor-group[_ngcontent-%COMP%]:last-child{border-bottom:none}.vendor-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;margin-bottom:16px;cursor:pointer}.vendor-header[_ngcontent-%COMP%]   .vendor-avatar[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:50%;overflow:hidden;flex-shrink:0}.vendor-header[_ngcontent-%COMP%]   .vendor-avatar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.vendor-header[_ngcontent-%COMP%]   .vendor-info[_ngcontent-%COMP%]{flex:1;min-width:0}.vendor-header[_ngcontent-%COMP%]   .vendor-name[_ngcontent-%COMP%]{font-family:latoBold,sans-serif;font-size:15px;color:#1a1a1a;margin:0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.vendor-header[_ngcontent-%COMP%]   .vendor-cuisine[_ngcontent-%COMP%]{font-family:latoRegular,sans-serif;font-size:12px;color:#888;margin:2px 0 0}.vendor-header[_ngcontent-%COMP%]   .vendor-arrow[_ngcontent-%COMP%]{color:#999;font-size:18px;flex-shrink:0}.cart-item[_ngcontent-%COMP%]{display:flex;gap:12px;padding:14px 0;border-bottom:1px solid #f0f0f0}.cart-item[_ngcontent-%COMP%]:last-of-type{border-bottom:none}.cart-item-left[_ngcontent-%COMP%]{flex:1;min-width:0}.item-type-row[_ngcontent-%COMP%]{margin-bottom:4px}.item-type-row[_ngcontent-%COMP%]   .type-icon[_ngcontent-%COMP%]{width:16px;height:16px}.cart-item-name[_ngcontent-%COMP%]{font-family:latoBold,sans-serif;font-size:15px;color:#1a1a1a;margin:0 0 4px}.cart-item-customization[_ngcontent-%COMP%]{font-family:latoRegular,sans-serif;font-size:12px;color:#888;margin:0 0 6px}.cart-item-price-row[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;margin-bottom:10px}.cart-item-price[_ngcontent-%COMP%]{font-family:latoBold,sans-serif;font-size:14px;color:#1a1a1a}.cart-item-original[_ngcontent-%COMP%]{font-family:latoRegular,sans-serif;font-size:13px;color:#999;text-decoration:line-through}.cart-item-actions[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px}.qty-control[_ngcontent-%COMP%]{display:flex;align-items:center;gap:0;border:1px solid #eee;border-radius:8px;overflow:hidden}.qty-btn[_ngcontent-%COMP%]{width:32px;height:32px;display:flex;align-items:center;justify-content:center;background:#fff;border:none;cursor:pointer}.qty-btn[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:16px;color:#f85c70}.qty-count[_ngcontent-%COMP%]{font-family:latoBold,sans-serif;font-size:14px;color:#1a1a1a;min-width:24px;text-align:center}.note-btn[_ngcontent-%COMP%]{background:#fff;border:1px solid #ddd;border-radius:16px;padding:5px 14px;font-family:latoRegular,sans-serif;font-size:12px;color:#1a1a1a;cursor:pointer}.heart-btn[_ngcontent-%COMP%]{background:none;border:none;padding:4px;cursor:pointer}.heart-btn[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:20px;color:#999}.cart-item-right[_ngcontent-%COMP%]{flex-shrink:0}.cart-item-right[_ngcontent-%COMP%]   .cart-item-img[_ngcontent-%COMP%]{width:80px;height:80px;border-radius:12px;object-fit:cover}.add-more-row[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:14px 0 4px;border-top:1px solid #f0f0f0;margin-top:4px}.add-more-row[_ngcontent-%COMP%]   .add-more-label[_ngcontent-%COMP%]{font-family:latoRegular,sans-serif;font-size:14px;color:#1a1a1a}.add-more-row[_ngcontent-%COMP%]   .add-more-btn[_ngcontent-%COMP%]{background:#fff;border:1.5px solid #F85C70;border-radius:20px;padding:6px 20px;font-family:latoBold,sans-serif;font-size:13px;color:#f85c70;cursor:pointer}.vendor-offer-area[_ngcontent-%COMP%]{margin-top:12px;border-top:1px dashed #e8e8e8;padding-top:12px}.vendor-offer-loading[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:4px 0 8px}.vendor-offer-loading[_ngcontent-%COMP%]   ion-spinner[_ngcontent-%COMP%]{width:16px;height:16px}.vendor-offer-loading[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-family:latoRegular,sans-serif;font-size:12px;color:#999}.vendor-offer-nudge[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:10px;background:#ff8c4214;border:1px solid rgba(255,140,66,.28);border-radius:10px;padding:10px 12px;margin-bottom:8px}.vendor-offer-nudge[_ngcontent-%COMP%]   .nudge-left[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:8px;flex:1;min-width:0}.vendor-offer-nudge[_ngcontent-%COMP%]   .nudge-left[_ngcontent-%COMP%]   .nudge-icon-wrap[_ngcontent-%COMP%]{width:30px;height:30px;border-radius:8px;background:#ff8c4226;display:flex;align-items:center;justify-content:center;flex-shrink:0}.vendor-offer-nudge[_ngcontent-%COMP%]   .nudge-left[_ngcontent-%COMP%]   .nudge-icon-wrap[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:16px;color:#ff8c42}.vendor-offer-nudge[_ngcontent-%COMP%]   .nudge-left[_ngcontent-%COMP%]   .nudge-text[_ngcontent-%COMP%]{flex:1;min-width:0;display:flex;flex-direction:column;gap:2px}.vendor-offer-nudge[_ngcontent-%COMP%]   .nudge-left[_ngcontent-%COMP%]   .nudge-text[_ngcontent-%COMP%]   .nudge-headline[_ngcontent-%COMP%]{font-family:latoRegular,sans-serif;font-size:12px;color:#1a1a1a;line-height:1.45}.vendor-offer-nudge[_ngcontent-%COMP%]   .nudge-left[_ngcontent-%COMP%]   .nudge-text[_ngcontent-%COMP%]   .nudge-headline[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-family:latoBold,sans-serif;color:#1a1a1a}.vendor-offer-nudge[_ngcontent-%COMP%]   .nudge-left[_ngcontent-%COMP%]   .nudge-text[_ngcontent-%COMP%]   .nudge-headline[_ngcontent-%COMP%]   .nudge-discount[_ngcontent-%COMP%]{color:#ff8c42}.vendor-offer-nudge[_ngcontent-%COMP%]   .nudge-left[_ngcontent-%COMP%]   .nudge-text[_ngcontent-%COMP%]   .nudge-sub[_ngcontent-%COMP%]{font-family:latoRegular,sans-serif;font-size:11px;color:#888;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.vendor-offer-nudge[_ngcontent-%COMP%]   .nudge-add-btn[_ngcontent-%COMP%]{background:#ff8c42;color:#fff;border:none;border-radius:16px;padding:6px 14px;font-family:latoBold,sans-serif;font-size:12px;cursor:pointer;white-space:nowrap;flex-shrink:0}.nudge-progress-wrap[_ngcontent-%COMP%]{height:3px;background:#ff8c4226;border-radius:2px;margin-bottom:10px;overflow:hidden}.nudge-progress-wrap[_ngcontent-%COMP%]   .nudge-progress-bar[_ngcontent-%COMP%]{height:100%;background:linear-gradient(90deg,#ff8c42,#fc8c5c);border-radius:2px;max-width:100%;transition:width .4s ease}.vendor-offer-auto[_ngcontent-%COMP%]{display:flex;align-items:flex-start;justify-content:space-between;gap:10px;background:linear-gradient(135deg,#2ecc7114,#27ae601f);border:1px solid rgba(46,204,113,.35);border-radius:10px;padding:10px 12px;margin-bottom:8px}.vendor-offer-auto[_ngcontent-%COMP%]   .vendor-offer-auto-left[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:8px;flex:1;min-width:0}.vendor-offer-auto[_ngcontent-%COMP%]   .vendor-offer-auto-left[_ngcontent-%COMP%]   .offer-check-wrap[_ngcontent-%COMP%]{width:30px;height:30px;border-radius:8px;background:#2ecc7126;display:flex;align-items:center;justify-content:center;flex-shrink:0}.vendor-offer-auto[_ngcontent-%COMP%]   .vendor-offer-auto-left[_ngcontent-%COMP%]   .offer-check-wrap[_ngcontent-%COMP%]   .offer-check-icon[_ngcontent-%COMP%]{font-size:18px;color:#2ecc71}.vendor-offer-auto[_ngcontent-%COMP%]   .vendor-offer-auto-left[_ngcontent-%COMP%]   .vendor-offer-auto-text[_ngcontent-%COMP%]{flex:1;min-width:0;display:flex;flex-direction:column;gap:3px}.vendor-offer-auto[_ngcontent-%COMP%]   .vendor-offer-auto-left[_ngcontent-%COMP%]   .vendor-offer-auto-text[_ngcontent-%COMP%]   .vendor-offer-auto-label[_ngcontent-%COMP%]{display:flex;align-items:center}.vendor-offer-auto[_ngcontent-%COMP%]   .vendor-offer-auto-left[_ngcontent-%COMP%]   .vendor-offer-auto-text[_ngcontent-%COMP%]   .vendor-offer-auto-label[_ngcontent-%COMP%]   .auto-badge[_ngcontent-%COMP%]{background:#2ecc71;color:#fff;font-family:latoBold,sans-serif;font-size:9px;padding:2px 7px;border-radius:4px;letter-spacing:.6px}.vendor-offer-auto[_ngcontent-%COMP%]   .vendor-offer-auto-left[_ngcontent-%COMP%]   .vendor-offer-auto-text[_ngcontent-%COMP%]   .vendor-offer-name[_ngcontent-%COMP%]{font-family:latoBold,sans-serif;font-size:13px;color:#1a1a1a;line-height:1.3}.vendor-offer-auto[_ngcontent-%COMP%]   .vendor-offer-auto-left[_ngcontent-%COMP%]   .vendor-offer-auto-text[_ngcontent-%COMP%]   .vendor-offer-auto-savings[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px;font-family:latoBold,sans-serif;font-size:12px;color:#2ecc71}.vendor-offer-auto[_ngcontent-%COMP%]   .vendor-offer-auto-left[_ngcontent-%COMP%]   .vendor-offer-auto-text[_ngcontent-%COMP%]   .vendor-offer-auto-savings[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:13px}.vendor-offer-auto[_ngcontent-%COMP%]   .vendor-offer-remove-btn[_ngcontent-%COMP%]{background:none;border:none;font-family:latoBold,sans-serif;font-size:11px;color:#999;cursor:pointer;padding:2px 0;flex-shrink:0;margin-top:2px}.vendor-subtotal[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:8px 0 0;font-family:latoRegular,sans-serif;font-size:14px;color:#888}.vendor-subtotal[_ngcontent-%COMP%]   .subtotal-label[_ngcontent-%COMP%]{font-family:latoRegular,sans-serif}.vendor-subtotal[_ngcontent-%COMP%]   .vendor-subtotal-prices[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.vendor-subtotal[_ngcontent-%COMP%]   .subtotal-original[_ngcontent-%COMP%]{font-family:latoRegular,sans-serif;font-size:13px;color:#999;text-decoration:line-through}.vendor-subtotal[_ngcontent-%COMP%]   .subtotal-amount[_ngcontent-%COMP%]{font-family:latoBold,sans-serif;color:#1a1a1a}.vendor-subtotal[_ngcontent-%COMP%]   .subtotal-amount.amount-savings[_ngcontent-%COMP%]{color:#2ecc71}.coupon-section[_ngcontent-%COMP%]{background:#fff;border-radius:14px;margin:8px 16px;padding:0;box-shadow:0 2px 8px #0000000f;overflow:hidden}.coupon-collapsed[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:14px 16px;cursor:pointer}.coupon-collapsed-left[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px}.coupon-icon[_ngcontent-%COMP%]{font-size:20px;color:#f85c70}.coupon-label[_ngcontent-%COMP%]{font-family:latoBold,sans-serif;font-size:15px;color:#1a1a1a}.coupon-toggle-icon[_ngcontent-%COMP%]{font-size:18px;color:#999}.best-offer-suggestion[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:0 16px 14px;cursor:pointer}.best-offer-suggestion[_ngcontent-%COMP%]   .best-offer-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;flex:1;min-width:0}.best-offer-suggestion[_ngcontent-%COMP%]   .best-offer-icon[_ngcontent-%COMP%]{font-size:18px;color:#ff8c42;flex-shrink:0}.best-offer-suggestion[_ngcontent-%COMP%]   .best-offer-text[_ngcontent-%COMP%]{font-family:latoRegular,sans-serif;font-size:13px;color:#888;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.best-offer-suggestion[_ngcontent-%COMP%]   .best-offer-text[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-family:latoBold,sans-serif;color:#1a1a1a}.best-offer-suggestion[_ngcontent-%COMP%]   .best-offer-apply-btn[_ngcontent-%COMP%]{background:none;border:1.5px solid #F85C70;border-radius:6px;padding:4px 14px;font-family:latoBold,sans-serif;font-size:12px;color:#f85c70;cursor:pointer;flex-shrink:0;margin-left:10px}.coupon-loading[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:0 16px 14px}.coupon-loading[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-family:latoRegular,sans-serif;font-size:13px;color:#999}.coupon-loading[_ngcontent-%COMP%]   ion-spinner[_ngcontent-%COMP%]{width:18px;height:18px}.coupon-expanded[_ngcontent-%COMP%]   .coupon-expanded-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:14px 16px;cursor:pointer;border-bottom:1px solid #f0f0f0}.coupon-input-row[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;padding:14px 16px}.coupon-input-row[_ngcontent-%COMP%]   .coupon-input[_ngcontent-%COMP%]{flex:1;border:1.5px solid #e0e0e0;border-radius:10px;padding:10px 14px;font-family:latoRegular,sans-serif;font-size:14px;color:#1a1a1a;outline:none;text-transform:uppercase}.coupon-input-row[_ngcontent-%COMP%]   .coupon-input[_ngcontent-%COMP%]::placeholder{text-transform:none;color:#999}.coupon-input-row[_ngcontent-%COMP%]   .coupon-input[_ngcontent-%COMP%]:focus{border-color:#f85c70}.coupon-input-row[_ngcontent-%COMP%]   .coupon-apply-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f85c70,#fc8c5c);color:#fff;font-family:latoBold,sans-serif;font-size:13px;border:none;border-radius:10px;padding:10px 20px;cursor:pointer;white-space:nowrap}.coupon-input-row[_ngcontent-%COMP%]   .coupon-apply-btn[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:default}.offers-list[_ngcontent-%COMP%]{padding:0 16px 14px}.offers-list[_ngcontent-%COMP%]   .offers-list-title[_ngcontent-%COMP%]{font-family:latoBold,sans-serif;font-size:14px;color:#888;margin:0 0 12px}.offer-card-apply[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:12px;padding:12px;margin-bottom:10px;background:#fafafa;border-radius:12px;border-left:3px solid #F85C70}.offer-card-apply[_ngcontent-%COMP%]   .offer-card-left[_ngcontent-%COMP%]{flex:1;min-width:0}.offer-card-apply[_ngcontent-%COMP%]   .offer-card-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;margin-bottom:4px;flex-wrap:wrap}.offer-card-apply[_ngcontent-%COMP%]   .offer-card-icon[_ngcontent-%COMP%]{font-size:18px;color:#f85c70;flex-shrink:0}.offer-card-apply[_ngcontent-%COMP%]   .offer-card-title[_ngcontent-%COMP%]{font-family:latoBold,sans-serif;font-size:14px;color:#1a1a1a;flex:1;min-width:0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.offer-card-apply[_ngcontent-%COMP%]   .offer-card-badge[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f85c70,#fc8c5c);color:#fff;font-family:latoBold,sans-serif;font-size:10px;padding:2px 8px;border-radius:4px;white-space:nowrap;flex-shrink:0}.offer-card-apply[_ngcontent-%COMP%]   .offer-card-desc[_ngcontent-%COMP%]{font-family:latoRegular,sans-serif;font-size:12px;color:#888;margin:0 0 6px;line-height:1.4}.offer-card-apply[_ngcontent-%COMP%]   .offer-card-meta[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;flex-wrap:wrap}.offer-card-apply[_ngcontent-%COMP%]   .offer-code-tag[_ngcontent-%COMP%]{background:#fff0f1;color:#f85c70;font-family:latoBold,sans-serif;font-size:11px;padding:2px 8px;border-radius:4px;letter-spacing:.3px}.offer-card-apply[_ngcontent-%COMP%]   .offer-min[_ngcontent-%COMP%]{font-family:latoRegular,sans-serif;font-size:11px;color:#999}.offer-card-apply[_ngcontent-%COMP%]   .offer-saves[_ngcontent-%COMP%]{font-family:latoBold,sans-serif;font-size:11px;color:#2ecc71}.offer-card-apply[_ngcontent-%COMP%]   .offer-vendor-badge[_ngcontent-%COMP%]{background:#f0f0f0;font-family:latoRegular,sans-serif;font-size:10px;color:#888;padding:2px 6px;border-radius:4px}.offer-card-apply[_ngcontent-%COMP%]   .offer-apply-btn[_ngcontent-%COMP%]{background:none;border:1.5px solid #F85C70;border-radius:6px;padding:6px 16px;font-family:latoBold,sans-serif;font-size:12px;color:#f85c70;cursor:pointer;white-space:nowrap;flex-shrink:0;align-self:center}.no-offers[_ngcontent-%COMP%]{padding:16px;text-align:center}.no-offers[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-family:latoRegular,sans-serif;font-size:14px;color:#999;margin:0 0 8px}.no-offers[_ngcontent-%COMP%]   .no-offers-link[_ngcontent-%COMP%]{background:none;border:none;font-family:latoBold,sans-serif;font-size:13px;color:#f85c70;cursor:pointer;padding:0}.offers-loading[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:8px;padding:20px 16px}.offers-loading[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-family:latoRegular,sans-serif;font-size:13px;color:#999}.offers-loading[_ngcontent-%COMP%]   ion-spinner[_ngcontent-%COMP%]{width:18px;height:18px}.coupon-applied[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;margin:8px 16px;padding:14px 16px;background:#eafaf1;border-radius:14px;border:1px solid #d4edda;box-shadow:0 2px 8px #0000000f}.coupon-applied[_ngcontent-%COMP%]   .applied-icon[_ngcontent-%COMP%]{font-size:22px;color:#2ecc71;flex-shrink:0}.coupon-applied[_ngcontent-%COMP%]   .applied-info[_ngcontent-%COMP%]{flex:1;min-width:0}.coupon-applied[_ngcontent-%COMP%]   .applied-code[_ngcontent-%COMP%]{font-family:latoBold,sans-serif;font-size:14px;color:#1a1a1a}.coupon-applied[_ngcontent-%COMP%]   .applied-savings[_ngcontent-%COMP%]{font-family:latoRegular,sans-serif;font-size:13px;color:#2ecc71;margin-left:4px}.coupon-applied[_ngcontent-%COMP%]   .applied-remove-btn[_ngcontent-%COMP%]{background:none;border:none;font-family:latoBold,sans-serif;font-size:12px;color:#f85c70;cursor:pointer;padding:4px 8px;flex-shrink:0}.summary-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:8px 0;font-family:latoRegular,sans-serif;font-size:14px;color:#1a1a1a}.summary-row[_ngcontent-%COMP%]   .summary-prices[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.summary-row[_ngcontent-%COMP%]   .original-price[_ngcontent-%COMP%]{color:#999;text-decoration:line-through;font-size:13px}.summary-row[_ngcontent-%COMP%]   .free-text[_ngcontent-%COMP%]{color:#2ecc71;font-family:latoBold,sans-serif}.summary-row.vendor-savings-row[_ngcontent-%COMP%]{color:#2ecc71;font-family:latoRegular,sans-serif;font-size:13px}.summary-row.vendor-savings-row[_ngcontent-%COMP%]   .vendor-savings-label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px}.summary-row.vendor-savings-row[_ngcontent-%COMP%]   .vendor-savings-label[_ngcontent-%COMP%]   .vendor-savings-icon[_ngcontent-%COMP%]{font-size:15px;color:#2ecc71}.summary-row.vendor-savings-row[_ngcontent-%COMP%]   .coupon-discount-amount[_ngcontent-%COMP%]{font-family:latoBold,sans-serif;color:#2ecc71}.summary-row.coupon-savings-row[_ngcontent-%COMP%]{color:#2ecc71;font-family:latoRegular,sans-serif;font-size:13px}.summary-row.coupon-savings-row[_ngcontent-%COMP%]   .coupon-discount-amount[_ngcontent-%COMP%]{font-family:latoBold,sans-serif;color:#2ecc71}.summary-row.total-row[_ngcontent-%COMP%]{padding-top:12px;margin-top:4px;border-top:1px solid #eee;font-family:latoBold,sans-serif;font-size:15px}.summary-row.total-row[_ngcontent-%COMP%]   .total-amount[_ngcontent-%COMP%]{font-family:latoBold,sans-serif;font-size:16px}.view-details-link[_ngcontent-%COMP%]{background:none;border:none;padding:8px 0 0;font-family:latoRegular,sans-serif;font-size:13px;color:#f85c70;cursor:pointer;display:flex;align-items:center;gap:4px}.view-details-link[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:14px;transition:transform .2s}.inline-spinner[_ngcontent-%COMP%]{display:inline-flex;align-items:center}.inline-spinner[_ngcontent-%COMP%]   ion-spinner[_ngcontent-%COMP%]{width:18px;height:18px}.free-badge-inline[_ngcontent-%COMP%]{font-family:latoBold,sans-serif;font-size:12px;color:#2ecc71;background:#eafaf1;padding:2px 8px;border-radius:4px}.tax-rate[_ngcontent-%COMP%], .delivery-km[_ngcontent-%COMP%]{font-family:latoRegular,sans-serif;font-size:12px;color:#999}.fee-details-expand[_ngcontent-%COMP%]{margin-top:12px;padding-top:12px;border-top:1px dashed #e0e0e0;animation:_ngcontent-%COMP%_slideDown .2s ease-out}@keyframes _ngcontent-%COMP%_slideDown{0%{opacity:0;max-height:0}to{opacity:1;max-height:500px}}.fee-details-section[_ngcontent-%COMP%]{margin-bottom:14px}.fee-details-section[_ngcontent-%COMP%]:last-child{margin-bottom:0}.fee-details-title[_ngcontent-%COMP%]{font-family:latoBold,sans-serif;font-size:13px;color:#888;margin-bottom:8px;text-transform:uppercase;letter-spacing:.3px}.fee-detail-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:4px 0;font-family:latoRegular,sans-serif;font-size:13px;color:#888}.fee-detail-row[_ngcontent-%COMP%]   .fee-detail-value[_ngcontent-%COMP%]{font-family:latoBold,sans-serif;color:#1a1a1a;font-size:13px}.fee-detail-row.fee-detail-note[_ngcontent-%COMP%]{justify-content:flex-start;gap:6px;padding:6px 0 2px;font-size:12px;color:#2ecc71}.fee-detail-row.fee-detail-note[_ngcontent-%COMP%]   .free-check-icon[_ngcontent-%COMP%]{font-size:16px;color:#2ecc71}.fee-detail-row.fee-detail-note[_ngcontent-%COMP%]   .info-icon[_ngcontent-%COMP%]{font-size:16px;color:#ff8c42}.fee-detail-row.fee-detail-note[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:inherit}.payment-method[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:14px 16px;background:#fafafa;border-top:1px solid #f0f0f0}.payment-method[_ngcontent-%COMP%]   .wallet-icon[_ngcontent-%COMP%]{font-size:22px;color:#1a1a1a}.payment-method[_ngcontent-%COMP%]   .wallet-label[_ngcontent-%COMP%]{font-family:latoBold,sans-serif;font-size:14px;color:#f85c70}.payment-method[_ngcontent-%COMP%]   .wallet-arrow[_ngcontent-%COMP%]{font-size:14px;color:#f85c70}.payment-method[_ngcontent-%COMP%]   .wallet-dot[_ngcontent-%COMP%]{color:#999;font-size:18px}.payment-method[_ngcontent-%COMP%]   .wallet-amount[_ngcontent-%COMP%]{font-family:latoBold,sans-serif;font-size:14px;color:#1a1a1a;margin-left:auto}.savings-text[_ngcontent-%COMP%]{font-family:latoBold,sans-serif;font-size:13px;color:#f85c70;padding:10px 16px 0;margin:0}ion-footer[_ngcontent-%COMP%]{background:#fff}ion-footer[_ngcontent-%COMP%]   .footer-wrap[_ngcontent-%COMP%]{padding:10px 16px;padding-bottom:calc(10px + env(safe-area-inset-bottom))}.active-order-banner[_ngcontent-%COMP%]{background:#fff8f0;border-top:1px solid #ffe0c0;padding:10px 16px;display:flex;align-items:center;gap:10px}.active-order-banner[_ngcontent-%COMP%]   .aob-info[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:8px;flex:1;min-width:0}.active-order-banner[_ngcontent-%COMP%]   .aob-info[_ngcontent-%COMP%]   .aob-icon[_ngcontent-%COMP%]{font-size:20px;color:#ff8c42;flex-shrink:0;margin-top:1px}.active-order-banner[_ngcontent-%COMP%]   .aob-info[_ngcontent-%COMP%]   .aob-text[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1px;min-width:0}.active-order-banner[_ngcontent-%COMP%]   .aob-info[_ngcontent-%COMP%]   .aob-title[_ngcontent-%COMP%]{font-family:latoBold,sans-serif;font-size:12px;color:#1a1a1a;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.active-order-banner[_ngcontent-%COMP%]   .aob-info[_ngcontent-%COMP%]   .aob-sub[_ngcontent-%COMP%]{font-family:latoRegular,sans-serif;font-size:11px;color:#888}.active-order-banner[_ngcontent-%COMP%]   .aob-actions[_ngcontent-%COMP%]{display:flex;gap:6px;flex-shrink:0}.active-order-banner[_ngcontent-%COMP%]   .aob-view-btn[_ngcontent-%COMP%]{background:none;border:1px solid #FF8C42;border-radius:16px;padding:5px 12px;font-family:latoBold,sans-serif;font-size:11px;color:#ff8c42;cursor:pointer}.active-order-banner[_ngcontent-%COMP%]   .aob-force-btn[_ngcontent-%COMP%]{background:none;border:1px solid #F85C70;border-radius:16px;padding:5px 12px;font-family:latoBold,sans-serif;font-size:11px;color:#f85c70;cursor:pointer}.active-order-banner[_ngcontent-%COMP%]   .aob-force-btn.active[_ngcontent-%COMP%]{background:#f85c70;color:#fff}.place-order-btn[_ngcontent-%COMP%]{width:100%;background:linear-gradient(135deg,#f85c70,#fc8c5c);color:#fff;font-family:latoBold,sans-serif;font-size:16px;border:none;border-radius:30px;padding:14px;cursor:pointer;display:inline-flex;align-items:center;justify-content:center;gap:8px}.place-order-btn[_ngcontent-%COMP%]:disabled{opacity:.75;cursor:not-allowed}.place-order-spinner[_ngcontent-%COMP%]{display:inline-flex;align-items:center}.place-order-spinner[_ngcontent-%COMP%]   ion-spinner[_ngcontent-%COMP%]{width:16px;height:16px;color:#fff}"]})}}return t})();var Qt=[{path:"",component:ze}],De=(()=>{class t{static{this.\u0275fac=function(a){return new(a||t)}}static{this.\u0275mod=S({type:t})}static{this.\u0275inj=I({imports:[W.forChild(Qt),W]})}}return t})();var kn=(()=>{class t{static{this.\u0275fac=function(a){return new(a||t)}}static{this.\u0275mod=S({type:t})}static{this.\u0275inj=I({imports:[F,fe,R,De,Be,ke]})}}return t})();export{kn as CartPageModule};
