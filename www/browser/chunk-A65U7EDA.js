import{A as C,B as m,D as s,E as c,F as r,Fa as y,G as g,K as O,L as I,M as p,Qa as E,S as h,T as l,U as u,Ua as z,V as P,Wb as N,Zb as j,ka as k,kb as T,la as w,m as x,nb as F,o as v,p as M,qb as $,ta as D,w as o,y as b,z as S}from"./chunk-AM2DXERQ.js";function q(e,a){e&1&&g(0,"img",13)}function B(e,a){e&1&&g(0,"img",14)}function A(e,a){e&1&&g(0,"img",15)}function H(e,a){if(e&1&&(c(0,"p",16),l(1),r()),e&2){let t=p(2);o(),u(t.productData.description)}}function J(e,a){e&1&&(c(0,"span",26),l(1,"Required"),r())}function K(e,a){e&1&&(c(0,"span",27),l(1,"Optional"),r())}function L(e,a){e&1&&g(0,"div",36)}function Q(e,a){if(e&1&&(c(0,"div",34),m(1,L,1,0,"div",35),r()),e&2){let t=p().$implicit,n=p().$implicit,i=p(2);o(),s("ngIf",i.isSelected(n._id,t._id))}}function U(e,a){e&1&&g(0,"ion-icon",39)}function W(e,a){if(e&1&&(c(0,"div",37),m(1,U,1,0,"ion-icon",38),r()),e&2){let t=p().$implicit,n=p().$implicit,i=p(2);h("checked",i.isSelected(n._id,t._id)),o(),s("ngIf",i.isSelected(n._id,t._id))}}function X(e,a){if(e&1&&(c(0,"span",40),l(1),r()),e&2){let t=p().$implicit;o(),P("+ $ ",t.price.toFixed(2))}}function Y(e,a){e&1&&(c(0,"span",41),l(1,"FREE"),r())}function Z(e,a){if(e&1){let t=O();c(0,"div",28),I("click",function(){let i=v(t).$implicit,d=p().$implicit,_=p(2);return M(i.isAvailable!==!1&&(d.type==="single"?_.onSingleSelect(d._id,i._id):_.onMultiToggle(d,i._id)))}),m(1,Q,2,1,"div",29)(2,W,2,3,"div",30),c(3,"span",31),l(4),r(),m(5,X,2,1,"span",32)(6,Y,2,0,"span",33),r()}if(e&2){let t=a.$implicit,n=p().$implicit;h("unavailable",t.isAvailable===!1),o(),s("ngIf",n.type==="single"),o(),s("ngIf",n.type==="multi"),o(2),u(t.name),o(),s("ngIf",t.price>0),o(),s("ngIf",t.price===0)}}function tt(e,a){if(e&1&&(c(0,"div",17)(1,"div",18)(2,"div",19)(3,"h3",20),l(4),r(),m(5,J,2,0,"span",21)(6,K,2,0,"span",22),r(),c(7,"p",23),l(8),r()(),c(9,"div",24),m(10,Z,7,7,"div",25),r(),g(11,"div",11),r()),e&2){let t=a.$implicit,n=p(2);o(4),u(t.groupName),o(),s("ngIf",t.required),o(),s("ngIf",!t.required),o(2),u(n.getGroupSubtitle(t)),o(2),s("ngForOf",t.options)}}function et(e,a){if(e&1&&(c(0,"ion-content",2)(1,"div",3)(2,"div",4),m(3,q,1,0,"img",5)(4,B,1,0,"img",6)(5,A,1,0,"img",7),r(),c(6,"h2",8),l(7),r(),c(8,"p",9),l(9),r(),m(10,H,2,1,"p",10),r(),g(11,"div",11),m(12,tt,12,5,"div",12),r()),e&2){let t=p();o(3),s("ngIf",t.productData.type==="non-veg"),o(),s("ngIf",t.productData.type==="veg"),o(),s("ngIf",t.productData.type==="egg"),o(2),u(t.productData.productName),o(2),P("$ ",t.productData.price.toFixed(2)),o(),s("ngIf",t.productData.description),o(2),s("ngForOf",t.productData.customizationGroups)}}function nt(e,a){if(e&1){let t=O();c(0,"ion-footer",42)(1,"button",43),I("click",function(){v(t);let i=p();return M(i.confirm())}),c(2,"span",44),l(3,"Add item"),r(),c(4,"span",45),l(5,"|"),r(),c(6,"span",46),l(7),r()()()}if(e&2){let t=p();o(),h("disabled",!t.isValid),o(6),P("$ ",t.totalPrice.toFixed(2))}}var V=(()=>{class e{constructor(t,n){this.modalCtrl=t,this.navParams=n,this.selections={}}ngOnInit(){this.productData=this.navParams.get("data"),this.initDefaultSelections()}initDefaultSelections(){if(this.productData?.customizationGroups)for(let t of this.productData.customizationGroups){this.selections[t._id]=[];for(let n of t.options)n.isDefault&&n.isAvailable!==!1&&this.selections[t._id].push(n._id)}}onSingleSelect(t,n){this.selections[t]=[n]}onMultiToggle(t,n){let i=this.selections[t._id]||[],d=i.indexOf(n);if(d>-1)i.splice(d,1);else{if(t.maxSelect&&i.length>=t.maxSelect)return;i.push(n)}this.selections[t._id]=[...i]}isSelected(t,n){return(this.selections[t]||[]).includes(n)}get addonTotal(){if(!this.productData?.customizationGroups)return 0;let t=0;for(let n of this.productData.customizationGroups){let i=this.selections[n._id]||[];for(let d of n.options)i.includes(d._id)&&(t+=d.price)}return t}get totalPrice(){return(this.productData?.price||0)+this.addonTotal}get isValid(){if(!this.productData?.customizationGroups)return!0;for(let t of this.productData.customizationGroups)if(t.required&&!this.selections[t._id]?.length)return!1;return!0}getGroupSubtitle(t){return t.type==="single"?"Select any 1":t.maxSelect?`Select up to ${t.maxSelect}`:"Select as many as you like"}cancel(){this.modalCtrl.dismiss(null,"cancel")}confirm(){if(!this.isValid)return;let t=[],n=[];for(let i of this.productData.customizationGroups||[]){let d=this.selections[i._id]||[],_=i.options.filter(f=>d.includes(f._id)).map(f=>({name:f.name,price:f.price}));_.length&&(t.push({groupName:i.groupName,selectedOptions:_}),n.push(..._.map(f=>f.name)))}this.modalCtrl.dismiss({product:this.productData,customizations:t,customizationSummary:n.join(", "),totalPrice:this.totalPrice},"confirm")}static{this.\u0275fac=function(n){return new(n||e)(b(N),b(z))}}static{this.\u0275cmp=S({type:e,selectors:[["app-item-customise"]],standalone:!1,decls:2,vars:2,consts:[["class","customise-content",4,"ngIf"],["class","customise-footer",4,"ngIf"],[1,"customise-content"],[1,"item-header"],[1,"item-type-icon"],["src","assets/non-veg.png",4,"ngIf"],["src","assets/veg.png",4,"ngIf"],["src","assets/egg.png",4,"ngIf"],[1,"item-name"],[1,"item-base-price"],["class","item-description",4,"ngIf"],[1,"divider"],["class","group",4,"ngFor","ngForOf"],["src","assets/non-veg.png"],["src","assets/veg.png"],["src","assets/egg.png"],[1,"item-description"],[1,"group"],[1,"group-header"],[1,"group-title-row"],[1,"group-name"],["class","group-badge required",4,"ngIf"],["class","group-badge optional",4,"ngIf"],[1,"group-subtitle"],[1,"option-list"],["class","option-row",3,"unavailable","click",4,"ngFor","ngForOf"],[1,"group-badge","required"],[1,"group-badge","optional"],[1,"option-row",3,"click"],["class","radio-circle",4,"ngIf"],["class","checkbox-box",3,"checked",4,"ngIf"],[1,"option-name"],["class","option-price",4,"ngIf"],["class","option-price free",4,"ngIf"],[1,"radio-circle"],["class","radio-dot",4,"ngIf"],[1,"radio-dot"],[1,"checkbox-box"],["name","checkmark",4,"ngIf"],["name","checkmark"],[1,"option-price"],[1,"option-price","free"],[1,"customise-footer"],[1,"add-item-btn",3,"click"],[1,"btn-label"],[1,"btn-divider"],[1,"btn-price"]],template:function(n,i){n&1&&m(0,et,13,7,"ion-content",0)(1,nt,8,3,"ion-footer",1),n&2&&(s("ngIf",i.productData),o(),s("ngIf",i.productData))},dependencies:[k,w,T,F,$],styles:[".customise-content[_ngcontent-%COMP%]{--background: #ffffff}.item-header[_ngcontent-%COMP%]{padding:20px 20px 16px}.item-header[_ngcontent-%COMP%]   .item-type-icon[_ngcontent-%COMP%]{margin-bottom:8px}.item-header[_ngcontent-%COMP%]   .item-type-icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:18px;height:18px}.item-header[_ngcontent-%COMP%]   .item-name[_ngcontent-%COMP%]{font-family:latoBold;font-size:20px;color:#1a1a1a;margin:0 0 6px;line-height:1.3}.item-header[_ngcontent-%COMP%]   .item-base-price[_ngcontent-%COMP%]{font-family:latoBold;font-size:15px;color:#1a1a1a;margin:0 0 8px}.item-header[_ngcontent-%COMP%]   .item-description[_ngcontent-%COMP%]{font-family:latoRegular;font-size:13px;color:#888;margin:0;line-height:1.4}.divider[_ngcontent-%COMP%]{height:8px;background:#f5f5f5}.group[_ngcontent-%COMP%]   .group-header[_ngcontent-%COMP%]{padding:16px 20px 8px}.group[_ngcontent-%COMP%]   .group-header[_ngcontent-%COMP%]   .group-title-row[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;margin-bottom:4px}.group[_ngcontent-%COMP%]   .group-header[_ngcontent-%COMP%]   .group-name[_ngcontent-%COMP%]{font-family:latoBold;font-size:16px;color:#1a1a1a;margin:0}.group[_ngcontent-%COMP%]   .group-header[_ngcontent-%COMP%]   .group-badge[_ngcontent-%COMP%]{font-family:latoBold;font-size:10px;padding:2px 8px;border-radius:4px;letter-spacing:.3px;text-transform:uppercase}.group[_ngcontent-%COMP%]   .group-header[_ngcontent-%COMP%]   .group-badge.required[_ngcontent-%COMP%]{background:#f85c701a;color:#f85c70}.group[_ngcontent-%COMP%]   .group-header[_ngcontent-%COMP%]   .group-badge.optional[_ngcontent-%COMP%]{background:#f0f0f0;color:#888}.group[_ngcontent-%COMP%]   .group-header[_ngcontent-%COMP%]   .group-subtitle[_ngcontent-%COMP%]{font-family:latoRegular;font-size:12px;color:#999;margin:0}.group[_ngcontent-%COMP%]   .option-list[_ngcontent-%COMP%]{padding:0 20px 8px}.option-row[_ngcontent-%COMP%]{display:flex;align-items:center;padding:14px 0;border-bottom:1px solid #f5f5f5;cursor:pointer;-webkit-tap-highlight-color:transparent}.option-row[_ngcontent-%COMP%]:last-child{border-bottom:none}.option-row.unavailable[_ngcontent-%COMP%]{opacity:.4;pointer-events:none}.option-row[_ngcontent-%COMP%]   .option-name[_ngcontent-%COMP%]{flex:1;font-family:latoRegular;font-size:14px;color:#1a1a1a}.option-row[_ngcontent-%COMP%]   .option-price[_ngcontent-%COMP%]{font-family:latoBold;font-size:13px;color:#1a1a1a;margin-left:12px}.option-row[_ngcontent-%COMP%]   .option-price.free[_ngcontent-%COMP%]{color:#2ecc71;font-size:12px}.radio-circle[_ngcontent-%COMP%]{width:20px;height:20px;border-radius:50%;border:2px solid #ccc;display:flex;align-items:center;justify-content:center;margin-right:14px;flex-shrink:0;transition:border-color .2s}.radio-circle[_ngcontent-%COMP%]   .radio-dot[_ngcontent-%COMP%]{width:10px;height:10px;border-radius:50%;background:#f85c70}.option-row[_ngcontent-%COMP%]:has(.radio-dot)   .radio-circle[_ngcontent-%COMP%]{border-color:#f85c70}.checkbox-box[_ngcontent-%COMP%]{width:20px;height:20px;border-radius:4px;border:2px solid #ccc;display:flex;align-items:center;justify-content:center;margin-right:14px;flex-shrink:0;transition:background .2s,border-color .2s}.checkbox-box[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:14px;color:#fff}.checkbox-box.checked[_ngcontent-%COMP%]{background:#f85c70;border-color:#f85c70}.customise-footer[_ngcontent-%COMP%]{padding:12px 20px;padding-bottom:calc(12px + env(safe-area-inset-bottom,0px));background:#fff;box-shadow:0 -2px 10px #0000000f}.customise-footer[_ngcontent-%COMP%]   .add-item-btn[_ngcontent-%COMP%]{width:100%;height:50px;border:none;border-radius:14px;background:linear-gradient(135deg,#f85c70,#fc5c7d);display:flex;align-items:center;justify-content:center;gap:10px;cursor:pointer;transition:opacity .2s}.customise-footer[_ngcontent-%COMP%]   .add-item-btn.disabled[_ngcontent-%COMP%]{opacity:.5;pointer-events:none}.customise-footer[_ngcontent-%COMP%]   .add-item-btn[_ngcontent-%COMP%]   .btn-label[_ngcontent-%COMP%]{font-family:latoBold;font-size:16px;color:#fff}.customise-footer[_ngcontent-%COMP%]   .add-item-btn[_ngcontent-%COMP%]   .btn-divider[_ngcontent-%COMP%]{color:#ffffff80;font-size:16px}.customise-footer[_ngcontent-%COMP%]   .add-item-btn[_ngcontent-%COMP%]   .btn-price[_ngcontent-%COMP%]{font-family:latoBold;font-size:16px;color:#fff}"]})}}return e})();var it=[{path:"",component:V}],R=(()=>{class e{static{this.\u0275fac=function(n){return new(n||e)}}static{this.\u0275mod=C({type:e})}static{this.\u0275inj=x({imports:[y.forChild(it),y]})}}return e})();var ut=(()=>{class e{static{this.\u0275fac=function(n){return new(n||e)}}static{this.\u0275mod=C({type:e})}static{this.\u0275inj=x({imports:[D,E,j,R]})}}return e})();export{V as a,ut as b};
