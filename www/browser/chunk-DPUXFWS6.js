import{a as T}from"./chunk-SGNIBMEL.js";import{a as le}from"./chunk-TM7DXTGG.js";import"./chunk-UVB6L6ON.js";import{a as ae}from"./chunk-EVNIR4QR.js";import{b as oe}from"./chunk-ATZI6UPN.js";import{a as re}from"./chunk-UGG7OXGH.js";import{$ as E,B as s,C as i,D as o,E as d,F as h,G as y,I as M,Ib as X,J as x,Ja as N,K as c,Lb as ee,Nb as te,Q as b,Qb as ne,S as a,T as g,U as v,Ua as G,V,Zb as ie,b as z,da as O,fa as C,g as B,gb as Z,ja as F,l as S,m as I,ma as $,mb as J,n as w,na as U,o as u,oa as W,p as _,pa as q,r as j,rb as K,sb as Q,u as r,ua as H,w as P,x as R,xa as Y,y as D,z as f}from"./chunk-U3GTSJOD.js";import"./chunk-B3I3XDBM.js";import"./chunk-QUJFQN2Y.js";import"./chunk-KSM42KW3.js";import"./chunk-KAYW723Y.js";import"./chunk-ZJWVYB4W.js";import"./chunk-WVHTM5RI.js";import"./chunk-IN6HLDFE.js";import"./chunk-GIMG75PD.js";import"./chunk-O5IUGFKF.js";import"./chunk-LHDZOLCP.js";import"./chunk-AEZ3F2AP.js";import"./chunk-7FY2OE2O.js";import"./chunk-5KM5ZX5B.js";import"./chunk-EAHJVID6.js";import"./chunk-FOH2II3V.js";import"./chunk-VZWY4NEG.js";import"./chunk-WI5MSH4N.js";import"./chunk-5SJVYNIP.js";import"./chunk-CKP3SGE2.js";import"./chunk-QLR5SVGL.js";import{e as L}from"./chunk-JHI3MBHO.js";var de=(()=>{class n{constructor(e){this.web=e}getAvailableOrders(e){return this.web.get(`order/available/${e}`)}getMyOrders(e,t){let l=t?`?filter=${t}`:"";return this.web.get(`order/delivery/${e}${l}`)}acceptOrder(e,t){return this.web.patch(`order/${e}/assign`,{deliveryBoyId:t})}markPickedUp(e,t){return this.web.patch(`order/${e}/delivery/pickup`,{deliveryBoyId:t})}markDelivered(e,t){return this.web.patch(`order/${e}/delivery/delivered`,{deliveryBoyId:t})}static{this.\u0275fac=function(t){return new(t||n)(w(oe))}}static{this.\u0275prov=S({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var ve=15e3,ce=(()=>{class n{constructor(e,t){this.orderService=e,this.ngZone=t,this.watchId=null,this.activeOrderId=null,this.lastSentAt=0}startTracking(e){return L(this,null,function*(){this.watchId&&this.stopTracking(),this.activeOrderId=e,this.lastSentAt=0;try{yield T.requestPermissions();let t=(l,m)=>{m||!l||this.ngZone.run(()=>this.maybeSend(l.coords.latitude,l.coords.longitude))};this.watchId=yield T.watchPosition({enableHighAccuracy:!0,timeout:15e3},t)}catch(t){console.warn("DeliveryLocationService: geolocation not available",t)}})}stopTracking(){this.watchId&&(T.clearWatch({id:this.watchId}),this.watchId=null),this.activeOrderId=null,this.lastSentAt=0}get isTracking(){return!!this.watchId}maybeSend(e,t){let l=Date.now();l-this.lastSentAt<ve||this.activeOrderId&&(this.lastSentAt=l,this.orderService.updateDeliveryLocation(this.activeOrderId,{latitude:e,longitude:t}).subscribe({error:m=>console.warn("Location send failed",m)}))}static{this.\u0275fac=function(t){return new(t||n)(w(le),w(j))}}static{this.\u0275prov=S({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var se=()=>[1,2,3],ue=()=>[1,2];function _e(n,p){n&1&&(i(0,"div",11),d(1,"span",12),a(2," Live "),o())}function be(n,p){if(n&1&&(i(0,"span",13),a(1),o()),n&2){let e=c();r(),g(e.tabCounts.available)}}function he(n,p){if(n&1&&(i(0,"span",13),a(1),o()),n&2){let e=c();r(),g(e.tabCounts.active)}}function ye(n,p){if(n&1&&(i(0,"span",13),a(1),o()),n&2){let e=c();r(),g(e.tabCounts.done)}}function Oe(n,p){n&1&&(i(0,"div",18),d(1,"ion-skeleton-text",19)(2,"ion-skeleton-text",20)(3,"ion-skeleton-text",21)(4,"ion-skeleton-text",22),o())}function Ce(n,p){n&1&&(h(0),f(1,Oe,5,0,"div",17),y()),n&2&&(r(),s("ngForOf",E(1,se)))}function Pe(n,p){n&1&&(i(0,"div",23)(1,"div",24),d(2,"ion-icon",25),o(),i(3,"p",26),a(4,"No locality assigned"),o(),i(5,"span",27),a(6,"Contact your admin to assign a delivery area to your account."),o()())}function Me(n,p){n&1&&(i(0,"div",28)(1,"div",29),d(2,"ion-icon",30),o(),i(3,"p"),a(4,"No orders available"),o(),i(5,"span"),a(6,"New orders will appear here when vendors mark them ready"),o()())}function we(n,p){if(n&1){let e=M();i(0,"div",31)(1,"div",32)(2,"div",33),d(3,"ion-icon",34),a(4),o(),i(5,"div",35),a(6),o()(),i(7,"div",36)(8,"div",37),d(9,"ion-icon",38),o(),i(10,"div",39)(11,"div",40),a(12),o(),i(13,"div",41),a(14),o()(),i(15,"div",42),a(16),O(17,"number"),o()(),i(18,"div",43),d(19,"ion-icon",44),i(20,"span",45),a(21),o()(),d(22,"div",46),i(23,"button",47),x("click",function(){let l=u(e).$implicit,m=c(2);return _(m.acceptOrder(l))}),d(24,"ion-icon",48),a(25," Accept Order "),o()()}if(n&2){let e=p.$implicit,t=c(2);b("urgent-card",t.isUrgent(e)),r(2),b("urgent",t.isUrgent(e)),r(2),v(" ",t.getTimeSince(e.createdAt)," "),r(),b("online",e.paymentMethod==="online"),r(),v(" ",e.paymentMethod==="online"?"ONLINE":"COD"," "),r(3),s("name",t.getVerticalIcon(e)),r(3),g(t.getVendorNames(e)),r(2),V("",t.getItemCount(e)," item",t.getItemCount(e)!==1?"s":""),r(2),v("\u20B9",C(17,14,e.totalAmount,"1.0-0")),r(5),v("Deliver to: ",t.getCustomerArea(e)||"Customer location")}}function ke(n,p){if(n&1&&(h(0),f(1,Ce,2,2,"ng-container",7)(2,Pe,7,0,"div",14)(3,Me,7,0,"div",15)(4,we,26,17,"div",16),y()),n&2){let e=c();r(),s("ngIf",e.isLoadingAvailable),r(),s("ngIf",!e.isLoadingAvailable&&e.noLocalityAssigned),r(),s("ngIf",!e.isLoadingAvailable&&!e.noLocalityAssigned&&e.availableOrders.length===0),r(),s("ngForOf",e.availableOrders)}}function Se(n,p){n&1&&(i(0,"div",18),d(1,"ion-skeleton-text",50)(2,"ion-skeleton-text",51)(3,"ion-skeleton-text",52),o())}function Ie(n,p){n&1&&(h(0),f(1,Se,4,0,"div",17),y()),n&2&&(r(),s("ngForOf",E(1,ue)))}function De(n,p){n&1&&(i(0,"div",28)(1,"div",29),d(2,"ion-icon",53),o(),i(3,"p"),a(4,"No active deliveries"),o(),i(5,"span"),a(6,"Accept an order from the Available tab"),o()())}function Ee(n,p){if(n&1&&(i(0,"div",58)(1,"div",32)(2,"div",59),d(3,"span",60),i(4,"span",61),a(5,"Vendor preparing\u2026"),o()(),i(6,"div",35),a(7),o()(),i(8,"div",62)(9,"div",63),a(10),o(),i(11,"div",64),a(12),o()(),i(13,"div",65),d(14,"ion-icon",66),i(15,"span"),a(16),o()(),d(17,"div",46),i(18,"div",67),d(19,"ion-icon",68),i(20,"span"),a(21,"Order is being prepared by the vendor. We'll let you know when it's ready for pickup."),o()()()),n&2){let e=c().$implicit,t=c(2);r(6),b("online",e.paymentMethod==="online"),r(),v(" ",e.paymentMethod==="online"?"ONLINE":"COD"," "),r(3),g(t.getCustomerName(e)),r(2),g(e.orderId),r(4),g(t.getVendorNames(e))}}function Te(n,p){if(n&1){let e=M();i(0,"div",69)(1,"div",32)(2,"div",59),d(3,"span",70),i(4,"span",71),a(5,"Ready for Pickup"),o()(),i(6,"div",33),d(7,"ion-icon",34),a(8),o()(),i(9,"div",62)(10,"div",63),a(11),o(),i(12,"div",64),a(13),o()(),i(14,"div",65),d(15,"ion-icon",66),i(16,"span"),a(17),o()(),i(18,"div",72)(19,"span",73),a(20,"Order Total"),o(),i(21,"span",74),a(22),O(23,"number"),o()(),d(24,"div",46),i(25,"div",75)(26,"button",76),x("click",function(){u(e);let l=c().$implicit,m=c(2);return _(m.navigateToVendor(l))}),d(27,"ion-icon",77),a(28," Go to Vendor "),o(),i(29,"button",78),x("click",function(){u(e);let l=c().$implicit,m=c(2);return _(m.markPickedUp(l))}),d(30,"ion-icon",53),a(31," Mark Picked Up "),o()()()}if(n&2){let e=c().$implicit,t=c(2);r(8),v(" ",t.getTimeSince(e.createdAt)," "),r(3),g(t.getCustomerName(e)),r(2),g(e.orderId),r(4),g(t.getVendorNames(e)),r(5),v("\u20B9",C(23,5,e.totalAmount,"1.0-0"))}}function Ae(n,p){if(n&1&&(i(0,"span",90),a(1),O(2,"number"),o()),n&2){let e=c(2).$implicit;r(),v("Collect \u20B9",C(2,1,e.totalAmount,"1.0-0")," on delivery")}}function ze(n,p){if(n&1&&(i(0,"span",91),a(1),O(2,"number"),o()),n&2){let e=c(2).$implicit;r(),v("Paid online \xB7 \u20B9",C(2,1,e.totalAmount,"1.0-0"))}}function Be(n,p){if(n&1){let e=M();i(0,"div",79)(1,"div",32)(2,"div",59),d(3,"span",80),i(4,"span",81),a(5,"Out for Delivery"),o()(),i(6,"div",35),a(7),o()(),i(8,"div",62)(9,"div",63),a(10),o(),i(11,"div",64),a(12),o()(),i(13,"div",82),d(14,"ion-icon",25),i(15,"span"),a(16),o()(),i(17,"div",72)(18,"span",73),f(19,Ae,3,4,"span",83)(20,ze,3,4,"span",84),o(),i(21,"button",85),x("click",function(){u(e);let l=c().$implicit,m=c(2);return _(m.callCustomer(l))}),d(22,"ion-icon",86),o()(),d(23,"div",46),i(24,"div",75)(25,"button",87),x("click",function(){u(e);let l=c().$implicit,m=c(2);return _(m.navigateToCustomer(l))}),d(26,"ion-icon",77),a(27," Navigate "),o(),i(28,"button",88),x("click",function(){u(e);let l=c().$implicit,m=c(2);return _(m.openDeliveredModal(l))}),d(29,"ion-icon",89),a(30," Mark Delivered "),o()()()}if(n&2){let e=c().$implicit,t=c(2);r(6),b("online",e.paymentMethod==="online"),r(),v(" ",e.paymentMethod==="online"?"ONLINE":"COD"," "),r(3),g(t.getCustomerName(e)),r(2),g(e.orderId),r(4),g(t.getDeliveryAddress(e)),r(3),s("ngIf",e.paymentMethod==="cod"),r(),s("ngIf",e.paymentMethod!=="cod")}}function Ve(n,p){if(n&1&&(h(0)(1,54),f(2,Ee,22,6,"div",55)(3,Te,32,8,"div",56)(4,Be,31,8,"div",57),y()()),n&2){let e=p.$implicit,t=c(2);r(),s("ngSwitch",t.getActiveOrderState(e)),r(),s("ngSwitchCase","waiting"),r(),s("ngSwitchCase","go_pickup"),r(),s("ngSwitchCase","out_for_delivery")}}function Ne(n,p){if(n&1&&(h(0),f(1,Ie,2,2,"ng-container",7)(2,De,7,0,"div",15)(3,Ve,5,4,"ng-container",49),y()),n&2){let e=c();r(),s("ngIf",e.isLoadingActive),r(),s("ngIf",!e.isLoadingActive&&e.activeOrders.length===0),r(),s("ngForOf",e.activeOrders)}}function Le(n,p){n&1&&(i(0,"div",18),d(1,"ion-skeleton-text",93)(2,"ion-skeleton-text",94)(3,"ion-skeleton-text",95),o())}function je(n,p){n&1&&(h(0),f(1,Le,4,0,"div",17),y()),n&2&&(r(),s("ngForOf",E(1,se)))}function Re(n,p){n&1&&(i(0,"div",28)(1,"div",29),d(2,"ion-icon",96),o(),i(3,"p"),a(4,"No deliveries yet"),o(),i(5,"span"),a(6,"Your completed deliveries will show here"),o()())}function Fe(n,p){if(n&1&&(i(0,"div",97)(1,"div",32)(2,"div",98),d(3,"ion-icon",99),i(4,"span",100),a(5,"Delivered"),o()(),i(6,"div",101),a(7),o()(),i(8,"div",62)(9,"div",63),a(10),o(),i(11,"div",64),a(12),o()(),i(13,"div",65),d(14,"ion-icon",38),i(15,"span"),a(16),o()(),i(17,"div",102)(18,"span",103),a(19),o(),i(20,"span",104),a(21),O(22,"number"),o()()()),n&2){let e=p.$implicit,t=c(2);r(7),g(t.getTimeSince(e.updatedAt||e.createdAt)),r(3),g(t.getCustomerName(e)),r(2),g(e.orderId),r(2),s("name",t.getVerticalIcon(e)),r(2),g(t.getVendorNames(e)),r(3),V("",t.getItemCount(e)," item",t.getItemCount(e)!==1?"s":""),r(2),v("\u20B9",C(22,8,e.totalAmount,"1.0-0"))}}function $e(n,p){if(n&1&&(h(0),f(1,je,2,2,"ng-container",7)(2,Re,7,0,"div",15)(3,Fe,23,11,"div",92),y()),n&2){let e=c();r(),s("ngIf",e.isLoadingDone),r(),s("ngIf",!e.isLoadingDone&&e.doneOrders.length===0),r(),s("ngForOf",e.doneOrders)}}function Ue(n,p){if(n&1){let e=M();i(0,"div",105),x("click",function(){u(e);let l=c();return _(l.closeDeliveredModal())}),o()}}function We(n,p){if(n&1&&(i(0,"div",116),d(1,"ion-icon",117),a(2),o()),n&2){let e=c(2);r(2),v(" ",e.getCustomerName(e.pendingDeliverOrder)," ")}}function qe(n,p){if(n&1&&(i(0,"div",118),d(1,"ion-icon",119),a(2),O(3,"number"),o()),n&2){let e=c(2);r(2),v(" Collect \u20B9",C(3,1,e.pendingDeliverOrder==null?null:e.pendingDeliverOrder.totalAmount,"1.0-0")," from customer ")}}function He(n,p){if(n&1){let e=M();i(0,"div",106)(1,"div",107),d(2,"ion-icon",96),o(),i(3,"div",108),a(4,"Confirm Delivery?"),o(),i(5,"div",109),a(6),o(),f(7,We,3,1,"div",110)(8,qe,4,4,"div",111),i(9,"div",112)(10,"button",113),x("click",function(){u(e);let l=c();return _(l.closeDeliveredModal())}),a(11,"Cancel"),o(),i(12,"button",114),x("click",function(){u(e);let l=c();return _(l.confirmDelivered())}),d(13,"ion-icon",115),a(14," Delivered \u2713 "),o()()()}if(n&2){let e=c();r(6),v(" ",e.pendingDeliverOrder==null?null:e.pendingDeliverOrder.orderId," "),r(),s("ngIf",e.pendingDeliverOrder),r(),s("ngIf",(e.pendingDeliverOrder==null?null:e.pendingDeliverOrder.paymentMethod)==="cod")}}var pe=(()=>{class n{get isTracking(){return this.deliveryLocationService.isTracking}constructor(e,t,l,m,k){this.storageService=e,this.deliveryService=t,this.deliveryLocationService=l,this.commonService=m,this.cdr=k,this.deliveryBoyId="",this.user=null,this.activeTab="available",this.availableOrders=[],this.activeOrders=[],this.doneOrders=[],this.isLoadingAvailable=!1,this.isLoadingActive=!1,this.isLoadingDone=!1,this.tabCounts={available:0,active:0,done:0},this.noLocalityAssigned=!1,this.showDeliveredModal=!1,this.pendingDeliverOrder=null,this.refreshInterval=null}ionViewWillEnter(){this.user=this.storageService.getUser(),this.deliveryBoyId=this.user?._id||"",this.loadAll(),this.startAutoRefresh()}ionViewWillLeave(){this.stopAutoRefresh()}ngOnDestroy(){this.stopAutoRefresh()}startAutoRefresh(){this.stopAutoRefresh(),this.refreshInterval=setInterval(()=>{this.loadAvailable(!1),this.loadActive(!1)},2e4)}stopAutoRefresh(){this.refreshInterval&&(clearInterval(this.refreshInterval),this.refreshInterval=null)}loadAll(){this.loadAvailable(!0),this.loadActive(!0),this.loadDone(!0)}loadAvailable(e=!0){this.deliveryBoyId&&(e&&(this.isLoadingAvailable=!0),this.deliveryService.getAvailableOrders(this.deliveryBoyId).subscribe({next:t=>{this.noLocalityAssigned=!1,this.availableOrders=t?.data||[],this.tabCounts.available=this.availableOrders.length,this.isLoadingAvailable=!1,this.cdr.detectChanges()},error:t=>{this.isLoadingAvailable=!1,t?.error?.code==="NO_LOCALITY"&&(this.noLocalityAssigned=!0,this.availableOrders=[]),this.cdr.detectChanges()}}))}loadActive(e=!0){this.deliveryBoyId&&(e&&(this.isLoadingActive=!0),this.deliveryService.getMyOrders(this.deliveryBoyId,"active").pipe(B(()=>z({data:[]}))).subscribe(t=>{this.activeOrders=t?.data||[],this.tabCounts.active=this.activeOrders.length,this.isLoadingActive=!1,this.cdr.detectChanges()}))}loadDone(e=!0){this.deliveryBoyId&&(e&&(this.isLoadingDone=!0),this.deliveryService.getMyOrders(this.deliveryBoyId,"done").pipe(B(()=>z({data:[]}))).subscribe(t=>{this.doneOrders=t?.data||[],this.tabCounts.done=this.doneOrders.length,this.isLoadingDone=!1,this.cdr.detectChanges()}))}setTab(e){this.activeTab=e}getActiveOrderState(e){if(e.status==="out_for_delivery")return"out_for_delivery";let t=(e.vendorOrders||[]).filter(m=>m.status!=="cancelled");return t.length>0&&t.every(m=>m.status==="ready")?"go_pickup":"waiting"}getVendorNames(e){return(e.vendorOrders||[]).filter(t=>t.status!=="cancelled").map(t=>t.vendorName||t.vendor?.name||"Vendor").join(", ")}getItemCount(e){return(e.vendorOrders||[]).filter(t=>t.status!=="cancelled").reduce((t,l)=>t+(l.items?.length||0),0)}getCustomerName(e){return e.userId?.fullName||"Customer"}getCustomerArea(e){return e.deliveryAddress?.label||e.deliveryAddress?.fullAddress||""}getDeliveryAddress(e){return e.deliveryAddress?.fullAddress||""}getVerticalIcon(e){return e.vertical==="mart"?"bag-handle-outline":"restaurant-outline"}getTimeSince(e){let t=Math.floor((Date.now()-new Date(e).getTime())/1e3);return t<60?`${t}s ago`:t<3600?`${Math.floor(t/60)}m ago`:`${Math.floor(t/3600)}h ago`}isUrgent(e){return(Date.now()-new Date(e.createdAt).getTime())/6e4>15}acceptOrder(e){this.deliveryService.acceptOrder(e.orderId,this.deliveryBoyId).subscribe({next:()=>{this.commonService.presentToast("bottom","Order accepted! Head to the vendor.","success"),this.loadAvailable(!1),this.loadActive(!1)},error:t=>{t?.error?.code==="ALREADY_ASSIGNED"?(this.commonService.presentToast("bottom","Another partner just accepted this order.","danger"),this.loadAvailable(!1)):this.commonService.presentToast("bottom",t?.error?.message||"Failed to accept order","danger")}})}markPickedUp(e){this.deliveryService.markPickedUp(e.orderId,this.deliveryBoyId).subscribe({next:()=>{this.commonService.presentToast("bottom","You're on the way! Navigate to customer.","success"),this.deliveryLocationService.startTracking(e.orderId),this.loadActive(!1)},error:t=>{this.commonService.presentToast("bottom",t?.error?.message||"Failed to update status","danger")}})}openDeliveredModal(e){this.pendingDeliverOrder=e,this.showDeliveredModal=!0}closeDeliveredModal(){this.showDeliveredModal=!1,this.pendingDeliverOrder=null}confirmDelivered(){if(!this.pendingDeliverOrder)return;let e=this.pendingDeliverOrder;this.deliveryService.markDelivered(e.orderId,this.deliveryBoyId).subscribe({next:()=>{this.showDeliveredModal=!1,this.pendingDeliverOrder=null,this.deliveryLocationService.stopTracking(),this.commonService.presentToast("bottom","Order delivered successfully!","success"),this.loadActive(!1),this.loadDone(!1)},error:t=>{this.commonService.presentToast("bottom",t?.error?.message||"Failed to mark delivered","danger")}})}navigateToVendor(e){let t=(e.vendorOrders||[]).find(ge=>ge.status!=="cancelled"),l=t?.vendor,m=l?.latitude||l?.coords?.lat,k=l?.longitude||l?.coords?.lng;m&&k?window.open(`https://www.google.com/maps/dir/?api=1&destination=${m},${k}&travelmode=driving`,"_blank"):t?.vendorAddress?window.open(`https://www.google.com/maps/search/?q=${encodeURIComponent(t.vendorAddress)}`,"_blank"):this.commonService.presentToast("bottom","Vendor location not available","danger")}navigateToCustomer(e){let t=e.deliveryAddress?.coords;t?.lat&&t?.lng?window.open(`https://www.google.com/maps/dir/?api=1&destination=${t.lat},${t.lng}&travelmode=driving`,"_blank"):e.deliveryAddress?.fullAddress?window.open(`https://www.google.com/maps/search/?q=${encodeURIComponent(e.deliveryAddress.fullAddress)}`,"_blank"):this.commonService.presentToast("bottom","Customer location not available","danger")}callCustomer(e){let t=e.userId?.mobileNo;t&&window.open("tel:"+t)}static{this.\u0275fac=function(t){return new(t||n)(P(re),P(de),P(ce),P(ae),P(F))}}static{this.\u0275cmp=R({type:n,selectors:[["app-delivery-orders"]],standalone:!1,decls:25,vars:15,consts:[["slot","start"],["defaultHref","/tabs/profile","text",""],["slot","end"],["class","tracking-badge",4,"ngIf"],[1,"status-tabs"],[1,"status-tab",3,"click"],["class","tab-count",4,"ngIf"],[4,"ngIf"],[2,"height","28px"],["class","modal-backdrop",3,"click",4,"ngIf"],["class","delivered-modal",4,"ngIf"],[1,"tracking-badge"],[1,"tracking-dot"],[1,"tab-count"],["class","no-locality-state",4,"ngIf"],["class","empty-state",4,"ngIf"],["class","order-card available-card",3,"urgent-card",4,"ngFor","ngForOf"],["class","order-card skeleton-card",4,"ngFor","ngForOf"],[1,"order-card","skeleton-card"],["animated","",2,"width","40%","height","12px","border-radius","6px"],["animated","",2,"width","70%","height","18px","margin-top","10px","border-radius","6px"],["animated","",2,"width","55%","height","12px","margin-top","8px","border-radius","6px"],["animated","",2,"width","100%","height","44px","margin-top","14px","border-radius","10px"],[1,"no-locality-state"],[1,"no-locality-icon"],["name","location-outline"],[1,"no-locality-title"],[1,"no-locality-sub"],[1,"empty-state"],[1,"empty-icon-wrap"],["name","bicycle-outline"],[1,"order-card","available-card"],[1,"card-top-row"],[1,"time-ago"],["name","time-outline"],[1,"payment-badge"],[1,"avail-vendor-row"],[1,"avail-vendor-icon"],[3,"name"],[1,"avail-vendor-info"],[1,"avail-vendor-name"],[1,"avail-items-meta"],[1,"avail-amount"],[1,"dest-row"],["name","navigate-outline",1,"dest-icon"],[1,"dest-text"],[1,"card-divider"],[1,"btn-accept",3,"click"],["name","checkmark-circle-outline"],[4,"ngFor","ngForOf"],["animated","",2,"width","50%","height","12px","border-radius","6px"],["animated","",2,"width","75%","height","18px","margin-top","10px","border-radius","6px"],["animated","",2,"width","90%","height","38px","margin-top","14px","border-radius","10px"],["name","bag-check-outline"],[3,"ngSwitch"],["class","order-card waiting-card",4,"ngSwitchCase"],["class","order-card pickup-card",4,"ngSwitchCase"],["class","order-card delivery-card",4,"ngSwitchCase"],[1,"order-card","waiting-card"],[1,"status-label-row"],[1,"waiting-dot"],[1,"status-text","waiting-text"],[1,"active-customer-row"],[1,"active-customer-name"],[1,"active-order-id"],[1,"active-vendor-strip"],["name","storefront-outline"],[1,"waiting-info-row"],["name","hourglass-outline"],[1,"order-card","pickup-card"],[1,"ready-dot"],[1,"status-text","ready-text"],[1,"active-amount-row"],[1,"active-amount-label"],[1,"active-amount"],[1,"action-row"],[1,"btn-navigate","btn-vendor",3,"click"],["name","navigate-outline"],[1,"btn-pickup-action",3,"click"],[1,"order-card","delivery-card"],[1,"delivery-dot"],[1,"status-text","delivery-text"],[1,"delivery-address-strip"],["class","cod-collect",4,"ngIf"],["class","online-paid",4,"ngIf"],[1,"call-btn",3,"click"],["name","call-outline"],[1,"btn-navigate","btn-customer",3,"click"],[1,"btn-delivered",3,"click"],["name","checkmark-done-outline"],[1,"cod-collect"],[1,"online-paid"],["class","order-card done-card",4,"ngFor","ngForOf"],["animated","",2,"width","45%","height","12px","border-radius","6px"],["animated","",2,"width","65%","height","17px","margin-top","10px","border-radius","6px"],["animated","",2,"width","50%","height","12px","margin-top","8px","border-radius","6px"],["name","checkmark-done-circle-outline"],[1,"order-card","done-card"],[1,"done-status-row"],["name","checkmark-circle",1,"done-icon"],[1,"done-label"],[1,"done-time"],[1,"done-footer-row"],[1,"done-items"],[1,"done-amount"],[1,"modal-backdrop",3,"click"],[1,"delivered-modal"],[1,"delivered-modal-icon"],[1,"delivered-modal-title"],[1,"delivered-modal-subtitle"],["class","delivered-modal-customer",4,"ngIf"],["class","delivered-modal-amount",4,"ngIf"],[1,"delivered-modal-actions"],[1,"modal-cancel-btn",3,"click"],[1,"modal-confirm-btn",3,"click"],["name","checkmark-outline"],[1,"delivered-modal-customer"],["name","person-outline"],[1,"delivered-modal-amount"],["name","cash-outline"]],template:function(t,l){t&1&&(i(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0),d(3,"ion-back-button",1),o(),i(4,"ion-title"),a(5,"My Deliveries"),o(),i(6,"ion-buttons",2),f(7,_e,3,0,"div",3),o()(),i(8,"div",4)(9,"button",5),x("click",function(){return l.setTab("available")}),a(10," Available "),f(11,be,2,1,"span",6),o(),i(12,"button",5),x("click",function(){return l.setTab("active")}),a(13," Active "),f(14,he,2,1,"span",6),o(),i(15,"button",5),x("click",function(){return l.setTab("done")}),a(16," Done "),f(17,ye,2,1,"span",6),o()()(),i(18,"ion-content"),f(19,ke,5,4,"ng-container",7)(20,Ne,4,3,"ng-container",7)(21,$e,4,3,"ng-container",7),d(22,"div",8),o(),f(23,Ue,1,0,"div",9)(24,He,15,3,"div",10)),t&2&&(r(7),s("ngIf",l.isTracking),r(2),b("active",l.activeTab==="available"),r(2),s("ngIf",l.tabCounts.available>0),r(),b("active",l.activeTab==="active"),r(2),s("ngIf",l.tabCounts.active>0),r(),b("active",l.activeTab==="done"),r(2),s("ngIf",l.tabCounts.done>0),r(2),s("ngIf",l.activeTab==="available"),r(),s("ngIf",l.activeTab==="active"),r(),s("ngIf",l.activeTab==="done"),r(2),s("ngIf",l.showDeliveredModal),r(),s("ngIf",l.showDeliveredModal))},dependencies:[$,U,W,q,Z,J,K,Q,X,ee,te,ne,H],styles:["ion-toolbar[_ngcontent-%COMP%]{--background: #fff;--color: #1a1a1a;box-shadow:0 1px #f0f0f0}ion-toolbar[_ngcontent-%COMP%]   ion-back-button[_ngcontent-%COMP%]{--color: $primary}ion-toolbar[_ngcontent-%COMP%]   ion-title[_ngcontent-%COMP%]{font-family:latoBold,sans-serif;font-size:17px;color:#1a1a1a}.tracking-badge[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:5px;background:#2ecc711f;border:1px solid rgba(46,204,113,.3);border-radius:20px;padding:4px 10px;font-family:latoBold,sans-serif;font-size:12px;color:#25a25a;margin-right:8px}.tracking-badge[_ngcontent-%COMP%]   .tracking-dot[_ngcontent-%COMP%]{width:7px;height:7px;border-radius:50%;background:#2ecc71;animation:_ngcontent-%COMP%_pulse-dot 1.4s ease-in-out infinite}@keyframes _ngcontent-%COMP%_pulse-dot{0%,to{opacity:1;transform:scale(1)}50%{opacity:.4;transform:scale(.7)}}.status-tabs[_ngcontent-%COMP%]{display:flex;flex-direction:row;overflow-x:auto;gap:8px;padding:8px 16px 12px;background:#fff;border-bottom:1px solid #f0f0f0;-webkit-overflow-scrolling:touch;scrollbar-width:none}.status-tabs[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.status-tab[_ngcontent-%COMP%]{flex-shrink:0;display:inline-flex;align-items:center;gap:6px;padding:8px 20px;border-radius:20px;border:1.5px solid #e8e8e8;background:#f7f7f7;color:#888;font-size:13px;font-family:latoRegular,sans-serif;cursor:pointer;transition:all .18s}.status-tab.active[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f85c70,#fc8c5c);border-color:transparent;color:#fff;font-family:latoBold,sans-serif;box-shadow:0 2px 8px #f85c7047}.tab-count[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;min-width:18px;height:18px;border-radius:9px;padding:0 5px;font-size:11px;font-family:latoBold,sans-serif;background:#0000001a;color:#555;line-height:1}.active[_ngcontent-%COMP%]   .tab-count[_ngcontent-%COMP%]{background:#ffffff47;color:#fff}ion-content[_ngcontent-%COMP%]{--background: #f2f2f2}.skeleton-card[_ngcontent-%COMP%]{background:#fff;border-radius:14px;margin:10px 16px;padding:16px}.empty-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:72px 32px;text-align:center}.empty-icon-wrap[_ngcontent-%COMP%]{width:72px;height:72px;border-radius:36px;background:#f5f5f5;display:flex;align-items:center;justify-content:center;margin-bottom:16px}.empty-icon-wrap[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:36px;color:#ccc}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-family:latoBold,sans-serif;font-size:17px;color:#888;margin:0 0 6px}.empty-state[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-family:latoRegular,sans-serif;font-size:13px;color:#bbb}.no-locality-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:64px 32px;text-align:center}.no-locality-icon[_ngcontent-%COMP%]{width:72px;height:72px;border-radius:36px;background:#f85c7014;display:flex;align-items:center;justify-content:center;margin-bottom:16px}.no-locality-icon[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:36px;color:#f85c70}.no-locality-title[_ngcontent-%COMP%]{font-family:latoBold,sans-serif;font-size:17px;color:#1a1a1a;margin:0 0 8px}.no-locality-sub[_ngcontent-%COMP%]{font-family:latoRegular,sans-serif;font-size:13px;color:#888;line-height:1.5}.order-card[_ngcontent-%COMP%]{background:#fff;border-radius:14px;margin:10px 16px;overflow:hidden;box-shadow:0 2px 10px #0000000d;padding:14px}.order-card.urgent-card[_ngcontent-%COMP%]{border-left:4px solid #e74c3c}.card-top-row[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;margin-bottom:12px}.status-label-row[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px}.status-text[_ngcontent-%COMP%]{font-family:latoBold,sans-serif;font-size:13px}.delivery-dot[_ngcontent-%COMP%], .ready-dot[_ngcontent-%COMP%], .waiting-dot[_ngcontent-%COMP%]{width:8px;height:8px;border-radius:50%;flex-shrink:0}.waiting-dot[_ngcontent-%COMP%]{background:#f59e0b;animation:_ngcontent-%COMP%_pulse-dot 1.6s ease-in-out infinite}.ready-dot[_ngcontent-%COMP%]{background:#2ecc71;animation:_ngcontent-%COMP%_pulse-dot 1.2s ease-in-out infinite}.delivery-dot[_ngcontent-%COMP%]{background:#4a5bf5;animation:_ngcontent-%COMP%_pulse-dot 1s ease-in-out infinite}.waiting-text[_ngcontent-%COMP%]{color:#f59e0b}.ready-text[_ngcontent-%COMP%]{color:#26ab5f}.delivery-text[_ngcontent-%COMP%]{color:#4a5bf5}.time-ago[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px;font-family:latoRegular,sans-serif;font-size:12px;color:#bbb}.time-ago[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:13px}.time-ago.urgent[_ngcontent-%COMP%]{color:#e74c3c;font-family:latoBold,sans-serif}.payment-badge[_ngcontent-%COMP%]{padding:3px 10px;border-radius:20px;font-size:11px;font-family:latoBold,sans-serif;background:#f0f0f0;color:#666}.payment-badge.online[_ngcontent-%COMP%]{background:#e8f4fd;color:#2980b9}.available-card[_ngcontent-%COMP%]{border-left:4px solid #FC8C5C}.avail-vendor-row[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;margin-bottom:10px}.avail-vendor-icon[_ngcontent-%COMP%]{width:42px;height:42px;border-radius:12px;background:linear-gradient(135deg,#f85c701f,#fc8c5c1f);display:flex;align-items:center;justify-content:center;flex-shrink:0}.avail-vendor-icon[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:20px;color:#f85c70}.avail-vendor-info[_ngcontent-%COMP%]{flex:1}.avail-vendor-name[_ngcontent-%COMP%]{font-family:latoBold,sans-serif;font-size:15px;color:#1a1a1a;margin-bottom:2px}.avail-items-meta[_ngcontent-%COMP%]{font-family:latoRegular,sans-serif;font-size:12px;color:#888}.avail-amount[_ngcontent-%COMP%]{font-family:latoBold,sans-serif;font-size:18px;color:#1a1a1a;flex-shrink:0}.dest-row[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px;padding:8px 10px;background:#f9f9f9;border-radius:8px;margin-bottom:12px}.dest-icon[_ngcontent-%COMP%]{font-size:15px;color:#f85c70;flex-shrink:0}.dest-text[_ngcontent-%COMP%]{font-family:latoRegular,sans-serif;font-size:13px;color:#888;flex:1}.waiting-card[_ngcontent-%COMP%]{border-left:4px solid #F59E0B}.pickup-card[_ngcontent-%COMP%]{border-left:4px solid #2ecc71}.delivery-card[_ngcontent-%COMP%]{border-left:4px solid #4A5BF5}.active-customer-row[_ngcontent-%COMP%]{margin-bottom:8px}.active-customer-name[_ngcontent-%COMP%]{font-family:latoBold,sans-serif;font-size:16px;color:#1a1a1a;margin-bottom:2px}.active-order-id[_ngcontent-%COMP%]{font-family:latoRegular,sans-serif;font-size:12px;color:#bbb}.active-vendor-strip[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px;margin-bottom:10px}.active-vendor-strip[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:14px;color:#888}.active-vendor-strip[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-family:latoRegular,sans-serif;font-size:13px;color:#888}.active-amount-row[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;margin-bottom:12px}.active-amount-label[_ngcontent-%COMP%]{font-family:latoRegular,sans-serif;font-size:13px;color:#888}.active-amount[_ngcontent-%COMP%]{font-family:latoBold,sans-serif;font-size:18px;color:#1a1a1a}.cod-collect[_ngcontent-%COMP%]{font-family:latoBold,sans-serif;font-size:13px;color:#ac6f07}.online-paid[_ngcontent-%COMP%]{font-family:latoRegular,sans-serif;font-size:13px;color:#2980b9}.waiting-info-row[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:8px;padding:10px 12px;background:#f59e0b14;border-radius:10px;margin-top:4px}.waiting-info-row[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:16px;color:#f59e0b;flex-shrink:0;margin-top:1px}.waiting-info-row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-family:latoRegular,sans-serif;font-size:13px;color:#945f06;line-height:1.45}.delivery-address-strip[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:6px;padding:8px 10px;background:#4a5bf50f;border-radius:8px;margin-bottom:10px}.delivery-address-strip[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:15px;color:#4a5bf5;flex-shrink:0;margin-top:1px}.delivery-address-strip[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-family:latoRegular,sans-serif;font-size:13px;color:#888;line-height:1.4}.call-btn[_ngcontent-%COMP%]{width:36px;height:36px;border-radius:18px;border:1.5px solid #F85C70;background:#f85c7012;color:#f85c70;display:flex;align-items:center;justify-content:center;cursor:pointer;flex-shrink:0}.call-btn[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:17px}.card-divider[_ngcontent-%COMP%]{height:1px;background:#f4f4f4;margin:0 -14px 12px}.action-row[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.btn-accept[_ngcontent-%COMP%]{width:100%;display:flex;align-items:center;justify-content:center;gap:8px;padding:12px;border-radius:12px;border:none;background:linear-gradient(135deg,#f85c70,#fc8c5c);color:#fff;font-family:latoBold,sans-serif;font-size:15px;cursor:pointer;box-shadow:0 3px 10px #f85c704d;transition:transform .1s,opacity .15s}.btn-accept[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:18px}.btn-accept[_ngcontent-%COMP%]:active{transform:scale(.98);opacity:.9}.btn-navigate[_ngcontent-%COMP%]{flex:0 0 auto;display:flex;align-items:center;gap:6px;padding:10px 14px;border-radius:10px;font-family:latoBold,sans-serif;font-size:13px;cursor:pointer;border:none;transition:transform .1s}.btn-navigate[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:16px}.btn-navigate[_ngcontent-%COMP%]:active{transform:scale(.97)}.btn-navigate.btn-vendor[_ngcontent-%COMP%]{background:#2ecc711a;color:#239a55;border:1.5px solid rgba(46,204,113,.3)}.btn-navigate.btn-customer[_ngcontent-%COMP%]{background:#4a5bf514;color:#4a5bf5;border:1.5px solid rgba(74,91,245,.25)}.btn-pickup-action[_ngcontent-%COMP%]{flex:1;display:flex;align-items:center;justify-content:center;gap:7px;padding:12px;border-radius:10px;border:none;background:#2ecc71;color:#fff;font-family:latoBold,sans-serif;font-size:14px;cursor:pointer;box-shadow:0 2px 8px #2ecc7147}.btn-pickup-action[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:18px}.btn-delivered[_ngcontent-%COMP%]{flex:1;display:flex;align-items:center;justify-content:center;gap:7px;padding:12px;border-radius:10px;border:none;background:linear-gradient(135deg,#4a5bf5,#7a87f8);color:#fff;font-family:latoBold,sans-serif;font-size:14px;cursor:pointer;box-shadow:0 2px 8px #4a5bf547}.btn-delivered[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:18px}.done-card[_ngcontent-%COMP%]{border-left:4px solid #ccc}.done-status-row[_ngcontent-%COMP%]{display:flex;align-items:center;gap:5px}.done-icon[_ngcontent-%COMP%]{font-size:16px;color:#2ecc71}.done-label[_ngcontent-%COMP%]{font-family:latoBold,sans-serif;font-size:13px;color:#26ab5f}.done-time[_ngcontent-%COMP%]{font-family:latoRegular,sans-serif;font-size:12px;color:#bbb}.done-footer-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-top:8px;padding-top:8px;border-top:1px solid #f4f4f4}.done-items[_ngcontent-%COMP%]{font-family:latoRegular,sans-serif;font-size:13px;color:#888}.done-amount[_ngcontent-%COMP%]{font-family:latoBold,sans-serif;font-size:16px;color:#1a1a1a}.modal-backdrop[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000080;z-index:999;backdrop-filter:blur(2px)}.delivered-modal[_ngcontent-%COMP%]{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);background:#fff;border-radius:22px;width:calc(100% - 48px);max-width:340px;z-index:1000;padding:28px 24px 20px;text-align:center;box-shadow:0 16px 56px #0000002e;animation:_ngcontent-%COMP%_modalPop .28s cubic-bezier(.34,1.56,.64,1) forwards}@keyframes _ngcontent-%COMP%_modalPop{0%{transform:translate(-50%,-50%) scale(.88);opacity:0}to{transform:translate(-50%,-50%) scale(1);opacity:1}}.delivered-modal-icon[_ngcontent-%COMP%]{width:72px;height:72px;border-radius:36px;background:#4a5bf51a;display:flex;align-items:center;justify-content:center;margin:0 auto 16px}.delivered-modal-icon[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:38px;color:#4a5bf5}.delivered-modal-title[_ngcontent-%COMP%]{font-family:latoBold,sans-serif;font-size:18px;color:#1a1a1a;margin-bottom:4px}.delivered-modal-subtitle[_ngcontent-%COMP%]{font-family:latoRegular,sans-serif;font-size:12px;color:#bbb;margin-bottom:16px}.delivered-modal-customer[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:6px;font-family:latoBold,sans-serif;font-size:14px;color:#1a1a1a;margin-bottom:10px}.delivered-modal-customer[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:16px;color:#888}.delivered-modal-amount[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:6px;font-family:latoBold,sans-serif;font-size:14px;color:#9e6506;background:#f59e0b14;border-radius:10px;padding:10px 16px;margin-bottom:20px}.delivered-modal-amount[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:18px;color:#f59e0b}.delivered-modal-actions[_ngcontent-%COMP%]{display:flex;gap:10px;margin-top:4px}.modal-cancel-btn[_ngcontent-%COMP%]{flex:1;padding:13px;border-radius:12px;border:1.5px solid #e8e8e8;background:#f7f7f7;color:#555;font-family:latoRegular,sans-serif;font-size:14px;cursor:pointer}.modal-confirm-btn[_ngcontent-%COMP%]{flex:1.5;display:flex;align-items:center;justify-content:center;gap:6px;padding:13px;border-radius:12px;border:none;background:linear-gradient(135deg,#4a5bf5,#7a87f8);color:#fff;font-family:latoBold,sans-serif;font-size:14px;cursor:pointer;box-shadow:0 4px 14px #4a5bf552}.modal-confirm-btn[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:16px}"]})}}return n})();var Ye=[{path:"",component:pe}],me=(()=>{class n{static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275mod=D({type:n})}static{this.\u0275inj=I({imports:[N.forChild(Ye),N]})}}return n})();var ft=(()=>{class n{static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275mod=D({type:n})}static{this.\u0275inj=I({imports:[Y,G,ie,me]})}}return n})();export{ft as DeliveryOrdersPageModule};
